/*!
 * The MIT License (MIT)
 * 
 * Copyright (c) 2017 CloudStrap AD
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE distributed under the MIT license.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("SashidoResponsive",[],t):"object"==typeof exports?exports.SashidoResponsive=t():e.SashidoResponsive=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){var n;(function(){function r(e){return function(t,r,n,i){r=x(r,i,4);var s=!O(t)&&w.keys(t),o=(s||t).length,a=e>0?0:o-1;return arguments.length<3&&(n=t[s?s[a]:a],a+=e),function(t,r,n,i,s,o){for(;s>=0&&s<o;s+=e){var a=i?i[s]:s;n=r(n,t[a],a,t)}return n}(t,r,n,s,a,o)}}function i(e){return function(t,r,n){r=P(r,n);for(var i=S(t),s=e>0?0:i-1;s>=0&&s<i;s+=e)if(r(t[s],s,t))return s;return-1}}function s(e,t,r){return function(n,i,s){var o=0,a=S(n);if("number"==typeof s)e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(r&&s&&a)return s=r(n,i),n[s]===i?s:-1;if(i!=i)return(s=t(h.call(n,o,a),w.isNaN))>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&s<a;s+=e)if(n[s]===i)return s;return-1}}function o(e,t){var r=z.length,n=e.constructor,i=w.isFunction(n)&&n.prototype||c,s="constructor";for(w.has(e,s)&&!w.contains(t,s)&&t.push(s);r--;)(s=z[r])in e&&e[s]!==i[s]&&!w.contains(t,s)&&t.push(s)}var a=this,u=a._,l=Array.prototype,c=Object.prototype,f=Function.prototype,p=l.push,h=l.slice,v=c.toString,d=c.hasOwnProperty,m=Array.isArray,g=Object.keys,y=f.bind,_=Object.create,b=function(){},w=function(e){return e instanceof w?e:this instanceof w?void(this._wrapped=e):new w(e)};void 0!==e&&e.exports&&(t=e.exports=w),t._=w,w.VERSION="1.8.3";var x=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,s){return e.call(t,r,n,i,s)}}return function(){return e.apply(t,arguments)}},P=function(e,t,r){return null==e?w.identity:w.isFunction(e)?x(e,t,r):w.isObject(e)?w.matcher(e):w.property(e)};w.iteratee=function(e,t){return P(e,t,1/0)};var E=function(e,t){return function(r){var n=arguments.length;if(n<2||null==r)return r;for(var i=1;i<n;i++)for(var s=arguments[i],o=e(s),a=o.length,u=0;u<a;u++){var l=o[u];t&&void 0!==r[l]||(r[l]=s[l])}return r}},A=function(e){if(!w.isObject(e))return{};if(_)return _(e);b.prototype=e;var t=new b;return b.prototype=null,t},j=function(e){return function(t){return null==t?void 0:t[e]}},L=Math.pow(2,53)-1,S=j("length"),O=function(e){var t=S(e);return"number"==typeof t&&t>=0&&t<=L};w.each=w.forEach=function(e,t,r){t=x(t,r);var n,i;if(O(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var s=w.keys(e);for(n=0,i=s.length;n<i;n++)t(e[s[n]],s[n],e)}return e},w.map=w.collect=function(e,t,r){t=P(t,r);for(var n=!O(e)&&w.keys(e),i=(n||e).length,s=Array(i),o=0;o<i;o++){var a=n?n[o]:o;s[o]=t(e[a],a,e)}return s},w.reduce=w.foldl=w.inject=r(1),w.reduceRight=w.foldr=r(-1),w.find=w.detect=function(e,t,r){var n;if(void 0!==(n=O(e)?w.findIndex(e,t,r):w.findKey(e,t,r))&&-1!==n)return e[n]},w.filter=w.select=function(e,t,r){var n=[];return t=P(t,r),w.each(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n},w.reject=function(e,t,r){return w.filter(e,w.negate(P(t)),r)},w.every=w.all=function(e,t,r){t=P(t,r);for(var n=!O(e)&&w.keys(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(!t(e[o],o,e))return!1}return!0},w.some=w.any=function(e,t,r){t=P(t,r);for(var n=!O(e)&&w.keys(e),i=(n||e).length,s=0;s<i;s++){var o=n?n[s]:s;if(t(e[o],o,e))return!0}return!1},w.contains=w.includes=w.include=function(e,t,r,n){return O(e)||(e=w.values(e)),("number"!=typeof r||n)&&(r=0),w.indexOf(e,t,r)>=0},w.invoke=function(e,t){var r=h.call(arguments,2),n=w.isFunction(t);return w.map(e,function(e){var i=n?t:e[t];return null==i?i:i.apply(e,r)})},w.pluck=function(e,t){return w.map(e,w.property(t))},w.where=function(e,t){return w.filter(e,w.matcher(t))},w.findWhere=function(e,t){return w.find(e,w.matcher(t))},w.max=function(e,t,r){var n,i,s=-1/0,o=-1/0;if(null==t&&null!=e)for(var a=0,u=(e=O(e)?e:w.values(e)).length;a<u;a++)(n=e[a])>s&&(s=n);else t=P(t,r),w.each(e,function(e,r,n){((i=t(e,r,n))>o||i===-1/0&&s===-1/0)&&(s=e,o=i)});return s},w.min=function(e,t,r){var n,i,s=1/0,o=1/0;if(null==t&&null!=e)for(var a=0,u=(e=O(e)?e:w.values(e)).length;a<u;a++)(n=e[a])<s&&(s=n);else t=P(t,r),w.each(e,function(e,r,n){((i=t(e,r,n))<o||i===1/0&&s===1/0)&&(s=e,o=i)});return s},w.shuffle=function(e){for(var t,r=O(e)?e:w.values(e),n=r.length,i=Array(n),s=0;s<n;s++)(t=w.random(0,s))!==s&&(i[s]=i[t]),i[t]=r[s];return i},w.sample=function(e,t,r){return null==t||r?(O(e)||(e=w.values(e)),e[w.random(e.length-1)]):w.shuffle(e).slice(0,Math.max(0,t))},w.sortBy=function(e,t,r){return t=P(t,r),w.pluck(w.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var k=function(e){return function(t,r,n){var i={};return r=P(r,n),w.each(t,function(n,s){var o=r(n,s,t);e(i,n,o)}),i}};w.groupBy=k(function(e,t,r){w.has(e,r)?e[r].push(t):e[r]=[t]}),w.indexBy=k(function(e,t,r){e[r]=t}),w.countBy=k(function(e,t,r){w.has(e,r)?e[r]++:e[r]=1}),w.toArray=function(e){return e?w.isArray(e)?h.call(e):O(e)?w.map(e,w.identity):w.values(e):[]},w.size=function(e){return null==e?0:O(e)?e.length:w.keys(e).length},w.partition=function(e,t,r){t=P(t,r);var n=[],i=[];return w.each(e,function(e,r,s){(t(e,r,s)?n:i).push(e)}),[n,i]},w.first=w.head=w.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:w.initial(e,e.length-t)},w.initial=function(e,t,r){return h.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},w.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:w.rest(e,Math.max(0,e.length-t))},w.rest=w.tail=w.drop=function(e,t,r){return h.call(e,null==t||r?1:t)},w.compact=function(e){return w.filter(e,w.identity)};var I=function(e,t,r,n){for(var i=[],s=0,o=n||0,a=S(e);o<a;o++){var u=e[o];if(O(u)&&(w.isArray(u)||w.isArguments(u))){t||(u=I(u,t,r));var l=0,c=u.length;for(i.length+=c;l<c;)i[s++]=u[l++]}else r||(i[s++]=u)}return i};w.flatten=function(e,t){return I(e,t,!1)},w.without=function(e){return w.difference(e,h.call(arguments,1))},w.uniq=w.unique=function(e,t,r,n){w.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=P(r,n));for(var i=[],s=[],o=0,a=S(e);o<a;o++){var u=e[o],l=r?r(u,o,e):u;t?(o&&s===l||i.push(u),s=l):r?w.contains(s,l)||(s.push(l),i.push(u)):w.contains(i,u)||i.push(u)}return i},w.union=function(){return w.uniq(I(arguments,!0,!0))},w.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=S(e);n<i;n++){var s=e[n];if(!w.contains(t,s)){for(var o=1;o<r&&w.contains(arguments[o],s);o++);o===r&&t.push(s)}}return t},w.difference=function(e){var t=I(arguments,!0,!0,1);return w.filter(e,function(e){return!w.contains(t,e)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(e){for(var t=e&&w.max(e,S).length||0,r=Array(t),n=0;n<t;n++)r[n]=w.pluck(e,n);return r},w.object=function(e,t){for(var r={},n=0,i=S(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},w.findIndex=i(1),w.findLastIndex=i(-1),w.sortedIndex=function(e,t,r,n){for(var i=(r=P(r,n,1))(t),s=0,o=S(e);s<o;){var a=Math.floor((s+o)/2);r(e[a])<i?s=a+1:o=a}return s},w.indexOf=s(1,w.findIndex,w.sortedIndex),w.lastIndexOf=s(-1,w.findLastIndex),w.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),s=0;s<n;s++,e+=r)i[s]=e;return i};var U=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var s=A(e.prototype),o=e.apply(s,i);return w.isObject(o)?o:s};w.bind=function(e,t){if(y&&e.bind===y)return y.apply(e,h.call(arguments,1));if(!w.isFunction(e))throw new TypeError("Bind must be called on a function");var r=h.call(arguments,2),n=function(){return U(e,n,t,this,r.concat(h.call(arguments)))};return n},w.partial=function(e){var t=h.call(arguments,1),r=function(){for(var n=0,i=t.length,s=Array(i),o=0;o<i;o++)s[o]=t[o]===w?arguments[n++]:t[o];for(;n<arguments.length;)s.push(arguments[n++]);return U(e,r,this,this,s)};return r},w.bindAll=function(e){var t,r,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)e[r=arguments[t]]=w.bind(e[r],e);return e},w.memoize=function(e,t){var r=function(n){var i=r.cache,s=""+(t?t.apply(this,arguments):n);return w.has(i,s)||(i[s]=e.apply(this,arguments)),i[s]};return r.cache={},r},w.delay=function(e,t){var r=h.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},w.defer=w.partial(w.delay,w,1),w.throttle=function(e,t,r){var n,i,s,o=null,a=0;r||(r={});var u=function(){a=!1===r.leading?0:w.now(),o=null,s=e.apply(n,i),o||(n=i=null)};return function(){var l=w.now();a||!1!==r.leading||(a=l);var c=t-(l-a);return n=this,i=arguments,c<=0||c>t?(o&&(clearTimeout(o),o=null),a=l,s=e.apply(n,i),o||(n=i=null)):o||!1===r.trailing||(o=setTimeout(u,c)),s}},w.debounce=function(e,t,r){var n,i,s,o,a,u=function(){var l=w.now()-o;l<t&&l>=0?n=setTimeout(u,t-l):(n=null,r||(a=e.apply(s,i),n||(s=i=null)))};return function(){s=this,i=arguments,o=w.now();var l=r&&!n;return n||(n=setTimeout(u,t)),l&&(a=e.apply(s,i),s=i=null),a}},w.wrap=function(e,t){return w.partial(t,e)},w.negate=function(e){return function(){return!e.apply(this,arguments)}},w.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},w.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},w.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},w.once=w.partial(w.before,2);var R=!{toString:null}.propertyIsEnumerable("toString"),z=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(e){if(!w.isObject(e))return[];if(g)return g(e);var t=[];for(var r in e)w.has(e,r)&&t.push(r);return R&&o(e,t),t},w.allKeys=function(e){if(!w.isObject(e))return[];var t=[];for(var r in e)t.push(r);return R&&o(e,t),t},w.values=function(e){for(var t=w.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},w.mapObject=function(e,t,r){t=P(t,r);for(var n,i=w.keys(e),s=i.length,o={},a=0;a<s;a++)o[n=i[a]]=t(e[n],n,e);return o},w.pairs=function(e){for(var t=w.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},w.invert=function(e){for(var t={},r=w.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},w.functions=w.methods=function(e){var t=[];for(var r in e)w.isFunction(e[r])&&t.push(r);return t.sort()},w.extend=E(w.allKeys),w.extendOwn=w.assign=E(w.keys),w.findKey=function(e,t,r){t=P(t,r);for(var n,i=w.keys(e),s=0,o=i.length;s<o;s++)if(n=i[s],t(e[n],n,e))return n},w.pick=function(e,t,r){var n,i,s={},o=e;if(null==o)return s;w.isFunction(t)?(i=w.allKeys(o),n=x(t,r)):(i=I(arguments,!1,!1,1),n=function(e,t,r){return t in r},o=Object(o));for(var a=0,u=i.length;a<u;a++){var l=i[a],c=o[l];n(c,l,o)&&(s[l]=c)}return s},w.omit=function(e,t,r){if(w.isFunction(t))t=w.negate(t);else{var n=w.map(I(arguments,!1,!1,1),String);t=function(e,t){return!w.contains(n,t)}}return w.pick(e,t,r)},w.defaults=E(w.allKeys,!0),w.create=function(e,t){var r=A(e);return t&&w.extendOwn(r,t),r},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e},w.isMatch=function(e,t){var r=w.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),s=0;s<n;s++){var o=r[s];if(t[o]!==i[o]||!(o in i))return!1}return!0};var M=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof w&&(e=e._wrapped),t instanceof w&&(t=t._wrapped);var i=v.call(e);if(i!==v.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var s="[object Array]"===i;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(w.isFunction(o)&&o instanceof o&&w.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var u=r.length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),s){if((u=e.length)!==t.length)return!1;for(;u--;)if(!M(e[u],t[u],r,n))return!1}else{var l,c=w.keys(e);if(u=c.length,w.keys(t).length!==u)return!1;for(;u--;)if(l=c[u],!w.has(t,l)||!M(e[l],t[l],r,n))return!1}return r.pop(),n.pop(),!0};w.isEqual=function(e,t){return M(e,t)},w.isEmpty=function(e){return null==e||(O(e)&&(w.isArray(e)||w.isString(e)||w.isArguments(e))?0===e.length:0===w.keys(e).length)},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=m||function(e){return"[object Array]"===v.call(e)},w.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){w["is"+e]=function(t){return v.call(t)==="[object "+e+"]"}}),w.isArguments(arguments)||(w.isArguments=function(e){return w.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(e){return"function"==typeof e||!1}),w.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&e!==+e},w.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===v.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return null!=e&&d.call(e,t)},w.noConflict=function(){return a._=u,this},w.identity=function(e){return e},w.constant=function(e){return function(){return e}},w.noop=function(){},w.property=j,w.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},w.matcher=w.matches=function(e){return e=w.extendOwn({},e),function(t){return w.isMatch(t,e)}},w.times=function(e,t,r){var n=Array(Math.max(0,e));t=x(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},w.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},w.now=Date.now||function(){return(new Date).getTime()};var F={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=w.invert(F),N=function(e){var t=function(t){return e[t]},r="(?:"+w.keys(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}};w.escape=N(F),w.unescape=N(H),w.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),w.isFunction(n)?n.call(e):n};var C=0;w.uniqueId=function(e){var t=++C+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,T={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+T[e]};w.template=function(e,t,r){!t&&r&&(t=r),t=w.defaults({},t,w.templateSettings);var n=RegExp([(t.escape||B).source,(t.interpolate||B).source,(t.evaluate||B).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(n,function(t,r,n,o,a){return s+=e.slice(i,a).replace(V,q),i=a+t.length,r?s+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var a=function(e){return o.call(this,e,w)},u=t.variable||"obj";return a.source="function("+u+"){\n"+s+"}",a},w.chain=function(e){var t=w(e);return t._chain=!0,t};var W=function(e,t){return e._chain?w(t).chain():t};w.mixin=function(e){w.each(w.functions(e),function(t){var r=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return p.apply(e,arguments),W(this,r.apply(w,e))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=l[e];w.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],W(this,r)}}),w.each(["concat","join","slice"],function(e){var t=l[e];w.prototype[e]=function(){return W(this,t.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},void 0===(n=function(){return w}.apply(t,[]))||(e.exports=n)}).call(this)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0);class i{static getCallbacks(e,t){var r;return"function"!=typeof e&&"function"!=typeof t&&(r=new Promise(function(r,n){e=(e=>{r(e)}),t=(e=>{n(e)})})),{promise:r,success:e,error:t}}static buildPromise(e,t,r){var n=i.getCallbacks(t,r);return e(n.success,n.error),n.promise}}i._stringCompare=function(e,t){return e.toLowerCase()===t},i.isElement={_isElement:function(e,t){var r=e;return"string"!=typeof r&&e instanceof HTMLElement&&(r=e.tagName),i._stringCompare(r,t)},image:function(e){return i.isElement._isElement(e,"img")},anchor:function(e){return i.isElement._isElement(e,"a")}},i.promisesAllSettled=function(e){return i._mapPromises(e)},i._mapPromises=function(e,t=!1){var r=n.size(e),i=Array.isArray(e)?[]:{};return 0===r?Promise.resolve(i):new Promise(function(s,o){var a=!1,u=0,l=function(e,t,n=!1){if(!a){var o;o=n?{state:"rejected",reason:e}:{state:"fulfilled",value:e},i[t]=o,++u===r&&s(i)}};n.each(e,function(e,r){e.then(function(e){return l(e,r),Promise.resolve(e)},function(e){return t&&(o(e),a=!0),l(e,r,!0),Promise.reject(e)})})})},t.Utils=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(3),s=r(1),o=r(5),a={processOnLoad:!1,processOnResize:!1,loadingImageUrl:"",errorImageUrl:"",attributes:{loadingImage:"data-loading-image",errorImage:"data-error-image",dpi:"data-dpi",imageSource:"data-src",fileSource:"data-href",enableOffline:"data-offline",enableResponsive:"data-responsive"},responsiveParams:{}};class u extends i.EventEmitterExtended{constructor(e){super(),this.settings={urlTemplate:"[protocol][hostname][appid]/[operations][url]",server:"localhost:7071/1/"},this.options=n.extend({},a,e),this.options.attributes=n.extend({},a.attributes,e.attributes),this.options.responsiveParams=n.extend({},a.responsiveParams,e.responsiveParams),this.responsive=new o.HtmlHelperResponsiveModule(this),this._init()}_init(){this.options.processOnLoad&&window.addEventListener("load",this.processAll.bind(this),!1),this.options.processOnResize&&window.addEventListener("resize",n.debounce(this.processAll.bind(this),300),!1)}_triggerOnProcessed(e){this.emit("processed",e)}_defaultProcessSettings(e){return n.defaults({},e,{responsive:!0})}_setLoadingUrl(e){var t=e.getAttribute(this.options.attributes.loadingImage)||this.options.loadingImageUrl;return!t||s.Utils.isElement.anchor(e)?Promise.resolve():this._setUrl(e,t,!0)}_getBackgroundSrc(e){var t=window.getComputedStyle(e,null).getPropertyValue("background-image"),r="none"!==t&&t;return r&&(r=r.replace(/url\(('?"?)(.*?)\1\)/gi,"$2")),r}_setErrorUrl(e){var t=e.getAttribute(this.options.attributes.errorImage)||this.options.errorImageUrl;return!t||s.Utils.isElement.anchor(e)?Promise.resolve():this._setUrl(e,t,!0)}_setUrl(e,t,r=!1){var i=this;return new Promise(function(o,a){var u=i._getAttr(e);if(s.Utils.isElement.image(e)&&u===i.options.attributes.imageSource)if(r)e.src=t,e.style.visibility="visible";else{var l=new Image;l.onerror=function(){l=null,a(new Error(`Can't be loaded: ${t}`))},l.onload=function(){l=null,i._setUrl(e,t,!0).then(o).catch(a)},l.src=t}else if(r=!0,u){var c;c=u===i.options.attributes.imageSource?"src":n.last(u.split("-")),e.setAttribute(c,t)}else e.style.backgroundImage="url("+t+")";r&&o()})}_getAttr(e){if(e.getAttribute(this.options.attributes.imageSource))return this.options.attributes.imageSource}_getUrl(e){return e.getAttribute(this.options.attributes.imageSource)||this._getBackgroundSrc(e)}_wrapElements(e){var t=this;return n.map(e,function(e){var r=e.tagName.toLowerCase(),n=function(t){var r,n=(e.attributes[t]||{value:null}).value;if(""===n)r=!0;else if(n)try{r=JSON.parse(n)}catch(e){r=!0}else r=!1;return r}(t.options.attributes.enableResponsive);return{item:e,tag:r,operations:{responsive:n}}})}process(e,t,r,i){return s.Utils.buildPromise(r=>{t=this._defaultProcessSettings(t),e=n.isArray(e)||e instanceof NodeList||e.length?n.flatten(e):[e];var i=this._wrapElements(e),o=[];n.each(i,e=>{var r={element:e.item,responsive:!1,offline:!1},n=this._getUrl(r.element);if(!n)return o.push(Promise.resolve(r));var i=!!t.responsive&&e.operations.responsive;if(!i)return o.push(this._setUrl(r.element,n,!0).then(function(){return r}));var s=this._setLoadingUrl(r.element);i&&(s=s.then(()=>this.responsive.responsiveImage(e,n).then(function(e,t){if(t)return r[e]=!0,t}.bind(this,"responsive")))),s=s.then(e=>this._setUrl(r.element,e).then(()=>r)).catch(e=>this._setErrorUrl(r.element).then(()=>{throw{element:r.element,error:e}})),o.push(s)}),s.Utils.promisesAllSettled(o).then(e=>{var t=[],i=[];n.each(e,function(e){"fulfilled"===e.state?t.push(e.value):i.push(e.reason)});var s={processed:t,failed:i};this._triggerOnProcessed(s),r(s)})},r,i)}processAll(e,t,r){e=this._defaultProcessSettings(e);var i="["+this.options.attributes.enableResponsive+"]",s=[];e.responsive&&(s=document.querySelectorAll(i));var o=[].slice,a=n.unique(o.call(s).concat([]));return this.process(a,e,t,r)}}t.HtmlHelper=u,e.exports=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4),i=r(0);class s{constructor(){this.canceled=!1}cancel(){this.canceled=!0}}t.EventEmitterExtended=class extends n.EventEmitter{emit(e,...t){return t.push(new s),super.emit(e,...t)}addListener(e,t){return super.addListener(e,(...e)=>{if(!i.last(e).canceled)return t.apply(this,e)}),this}prependOnceListener(e,t){if(this.once(e,t),!Array.isArray(this._events[e]))return this;const r=i.last(this._events[e]),n=i.without(this._events[e],r);return this._events[e]=[r].concat(n),this}once(e,t){return super.once(e,t),this}on(e,t){return this.addListener(e,t),this}off(e,t){return this.removeListener(e,t),this}}},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(r=this._events[e],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(i(r))for(a=Array.prototype.slice.call(arguments,1),o=(l=r.slice()).length,u=0;u<o;u++)l[u].apply(this,a);return!0},r.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(o=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,s,o,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,s=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(a=o;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){s=a;break}if(s<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(0),i=r(1),s={params:{resize:{}},isUserResize:!1};t.HtmlHelperResponsiveModule=class{constructor(e){this.htmlHelper=e}getBackgroundWidth(e){return Math.ceil(e.offsetWidth)}getBackgroundHeight(e){return Math.ceil(e.offsetHeight)}parseParamsString(e){if(!e||void 0===e||e.length<=1)return s;var t=e.split("/"),r={},i=!1;return n.chain(t).filter(function(e){return!!e}).each(function(e){var t=e.split("="),n=t[0],s=t[1];s=unescape(s.replace(/\+/g," ")),r[n]=s,"resize"===n&&(i=!0)}),{params:r,isUserResize:i}}getImgParams(e,t){var r,i=this,o=e.replace(/.*?resize=[^//]*\//gi,""),a=new RegExp("https?://","gi"),u=new RegExp(this.htmlHelper.settings.server,"gi"),l=new RegExp(this.htmlHelper.options.appId+"/","gi"),c=e.replace(o,"").replace(a,"").replace(u,"").replace(l,"").toLowerCase();if(""!==c){var f=c.indexOf("/")?c.substring(0,c.length-1):c;r=this.parseParamsString(f)}else t.dataset.responsiveParams?(r=s,n.each(t.dataset.responsiveParams.split(","),function(e){var t=e.split(":"),n=t[0],i=t[1];r.params.resize[n]=i})):r=s;return n.chain(this.htmlHelper.options.responsiveParams).keys().each(function(e){var t=i.htmlHelper.options.responsiveParams[e];r.params.resize[e]=t}),r.isUserResize&&(o=e),{imgUrl:o,operations:r.params,isUserResize:r.isUserResize}}hasClass(e,t){var r=new RegExp("(?:\\s|^)"+t+"(?:\\s|$)");return!!e.className.match(r)}getImageWidth(e){var t=e.parentNode;if(t){var r=t.offsetWidth,n=window.getComputedStyle(t,null),i=parseFloat(n.getPropertyValue("padding-left")),s=parseFloat(n.getPropertyValue("padding-right")),o=parseFloat(n.getPropertyValue("border-left-width")),a=parseFloat(n.getPropertyValue("border-right-width"));return Math.abs(r-Math.ceil(i+s+o+a))}return 0}getImageHeight(e){var t=e.parentNode;if(t){var r=t.offsetHeight,n=window.getComputedStyle(t,null),i=parseFloat(n.getPropertyValue("padding-top")),s=parseFloat(n.getPropertyValue("padding-bottom")),o=parseFloat(n.getPropertyValue("border-top-width")),a=parseFloat(n.getPropertyValue("border-bottom-width"));return Math.abs(r-Math.ceil(i+s+o+a))}return 0}getDevicePixelRatio(){return window.devicePixelRatio?window.devicePixelRatio:1}getPixelRatio(e){var t=e.getAttribute(this.htmlHelper.options.attributes.dpi)||"";return""!==t?!!n.isNumber(t)&&parseFloat(t):this.getDevicePixelRatio()}getImgParamsString(e){var t="resize=";return n.chain(e.resize).keys().each(function(r,n,i){t+=r+":"+e.resize[r],n<i.length-1?t+=",":t+="/"}),t}responsiveImage(e,t){var r,s=n.extend({},e),o=s.item,a=s.tag,u=i.Utils.isElement.image(a);(s=n.extend({},s,this.getImgParams(t,e.item))).isUserResize||(r=u?this.getImageWidth(o):this.getBackgroundWidth(o)),r=r||!1;var l=s.isUserResize?s.imgUrl:this.getImgSrc(s,r);return new Promise(function(e){return r||s.isUserResize?e(l):e()})}getImgSrc(e,t){var r=this.htmlHelper.options.scheme+"://",n=this.htmlHelper.options.appId,i=this.htmlHelper.settings.server,s=this.htmlHelper.settings.urlTemplate,o=this.getPixelRatio(e.item);s=(s=(s=s.replace("[protocol]",r)).replace("[appid]",n||"")).replace("[hostname]",i);var a,u=e.operations||!1;if(u){u.resize=u.resize||{},u.resize.w=t,u.resize.pd=o;var l=u.resize.fill;"cover"!==l&&"contain"!==l||(u.resize.h=this.getImageHeight(e.item)||this.getBackgroundHeight(e.item)),a=this.getImgParamsString(u)}else{var c={resize:{w:t,pd:o}};a=this.getImgParamsString(c)}return s=s.replace("[operations]",a),s=s.replace("[url]",e.imgUrl)}}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBkMWI4OGE3NDE1Y2E4MDc5MjdhYiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdW5kZXJzY29yZS91bmRlcnNjb3JlLmpzIiwid2VicGFjazovLy8uL3V0aWxzLnRzIiwid2VicGFjazovLy8uL2h0bWxIZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vRXZlbnRFbWl0dGVyRXh0ZW5kZWQudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vaHRtbEhlbHBlclJlc3BvbnNpdmVNb2R1bGUudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiY3JlYXRlUmVkdWNlIiwiZGlyIiwib2JqIiwiaXRlcmF0ZWUiLCJtZW1vIiwiY29udGV4dCIsIm9wdGltaXplQ2IiLCJrZXlzIiwiaXNBcnJheUxpa2UiLCJfIiwibGVuZ3RoIiwiaW5kZXgiLCJhcmd1bWVudHMiLCJjdXJyZW50S2V5IiwiaXRlcmF0b3IiLCJjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlciIsImFycmF5IiwicHJlZGljYXRlIiwiY2IiLCJnZXRMZW5ndGgiLCJjcmVhdGVJbmRleEZpbmRlciIsInByZWRpY2F0ZUZpbmQiLCJzb3J0ZWRJbmRleCIsIml0ZW0iLCJpZHgiLCJNYXRoIiwibWF4IiwibWluIiwic2xpY2UiLCJpc05hTiIsImNvbGxlY3ROb25FbnVtUHJvcHMiLCJub25FbnVtSWR4Iiwibm9uRW51bWVyYWJsZVByb3BzIiwiY29uc3RydWN0b3IiLCJwcm90byIsImlzRnVuY3Rpb24iLCJPYmpQcm90byIsInByb3AiLCJoYXMiLCJjb250YWlucyIsInB1c2giLCJwcmV2aW91c1VuZGVyc2NvcmUiLCJBcnJheVByb3RvIiwiQXJyYXkiLCJGdW5jUHJvdG8iLCJGdW5jdGlvbiIsInRvU3RyaW5nIiwibmF0aXZlSXNBcnJheSIsImlzQXJyYXkiLCJuYXRpdmVLZXlzIiwibmF0aXZlQmluZCIsImJpbmQiLCJuYXRpdmVDcmVhdGUiLCJjcmVhdGUiLCJDdG9yIiwiX3dyYXBwZWQiLCJWRVJTSU9OIiwiZnVuYyIsImFyZ0NvdW50IiwidmFsdWUiLCJvdGhlciIsImNvbGxlY3Rpb24iLCJhY2N1bXVsYXRvciIsImFwcGx5IiwiaWRlbnRpdHkiLCJpc09iamVjdCIsIm1hdGNoZXIiLCJJbmZpbml0eSIsImNyZWF0ZUFzc2lnbmVyIiwia2V5c0Z1bmMiLCJ1bmRlZmluZWRPbmx5Iiwic291cmNlIiwia2V5IiwiYmFzZUNyZWF0ZSIsInJlc3VsdCIsIk1BWF9BUlJBWV9JTkRFWCIsInBvdyIsImVhY2giLCJmb3JFYWNoIiwibWFwIiwiY29sbGVjdCIsInJlc3VsdHMiLCJyZWR1Y2UiLCJmb2xkbCIsImluamVjdCIsInJlZHVjZVJpZ2h0IiwiZm9sZHIiLCJmaW5kIiwiZGV0ZWN0IiwiZmluZEluZGV4IiwiZmluZEtleSIsImZpbHRlciIsInNlbGVjdCIsImxpc3QiLCJyZWplY3QiLCJuZWdhdGUiLCJldmVyeSIsImFsbCIsInNvbWUiLCJhbnkiLCJpbmNsdWRlcyIsImluY2x1ZGUiLCJmcm9tSW5kZXgiLCJndWFyZCIsInZhbHVlcyIsImluZGV4T2YiLCJpbnZva2UiLCJtZXRob2QiLCJhcmdzIiwiaXNGdW5jIiwicGx1Y2siLCJ3aGVyZSIsImF0dHJzIiwiZmluZFdoZXJlIiwiY29tcHV0ZWQiLCJsYXN0Q29tcHV0ZWQiLCJzaHVmZmxlIiwicmFuZCIsInNldCIsInNodWZmbGVkIiwicmFuZG9tIiwic2FtcGxlIiwic29ydEJ5IiwiY3JpdGVyaWEiLCJzb3J0IiwibGVmdCIsInJpZ2h0IiwiYSIsImIiLCJncm91cCIsImJlaGF2aW9yIiwiZ3JvdXBCeSIsImluZGV4QnkiLCJjb3VudEJ5IiwidG9BcnJheSIsInNpemUiLCJwYXJ0aXRpb24iLCJwYXNzIiwiZmFpbCIsImZpcnN0IiwiaGVhZCIsInRha2UiLCJpbml0aWFsIiwibGFzdCIsInJlc3QiLCJ0YWlsIiwiZHJvcCIsImNvbXBhY3QiLCJmbGF0dGVuIiwiaW5wdXQiLCJzaGFsbG93Iiwic3RyaWN0Iiwic3RhcnRJbmRleCIsIm91dHB1dCIsImlzQXJndW1lbnRzIiwiaiIsImxlbiIsIndpdGhvdXQiLCJkaWZmZXJlbmNlIiwidW5pcSIsInVuaXF1ZSIsImlzU29ydGVkIiwiaXNCb29sZWFuIiwic2VlbiIsInVuaW9uIiwiaW50ZXJzZWN0aW9uIiwiYXJnc0xlbmd0aCIsInppcCIsInVuemlwIiwiZmluZExhc3RJbmRleCIsImxvdyIsImhpZ2giLCJtaWQiLCJmbG9vciIsImxhc3RJbmRleE9mIiwicmFuZ2UiLCJzdGFydCIsInN0b3AiLCJzdGVwIiwiY2VpbCIsImV4ZWN1dGVCb3VuZCIsInNvdXJjZUZ1bmMiLCJib3VuZEZ1bmMiLCJjYWxsaW5nQ29udGV4dCIsInNlbGYiLCJUeXBlRXJyb3IiLCJib3VuZCIsImNvbmNhdCIsInBhcnRpYWwiLCJib3VuZEFyZ3MiLCJwb3NpdGlvbiIsImJpbmRBbGwiLCJFcnJvciIsIm1lbW9pemUiLCJoYXNoZXIiLCJjYWNoZSIsImFkZHJlc3MiLCJkZWxheSIsIndhaXQiLCJzZXRUaW1lb3V0IiwiZGVmZXIiLCJ0aHJvdHRsZSIsIm9wdGlvbnMiLCJ0aW1lb3V0IiwicHJldmlvdXMiLCJsYXRlciIsImxlYWRpbmciLCJub3ciLCJyZW1haW5pbmciLCJjbGVhclRpbWVvdXQiLCJ0cmFpbGluZyIsImRlYm91bmNlIiwiaW1tZWRpYXRlIiwidGltZXN0YW1wIiwiY2FsbE5vdyIsIndyYXAiLCJ3cmFwcGVyIiwiY29tcG9zZSIsImFmdGVyIiwidGltZXMiLCJiZWZvcmUiLCJvbmNlIiwiaGFzRW51bUJ1ZyIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiYWxsS2V5cyIsIm1hcE9iamVjdCIsInBhaXJzIiwiaW52ZXJ0IiwiZnVuY3Rpb25zIiwibWV0aG9kcyIsIm5hbWVzIiwiZXh0ZW5kIiwiZXh0ZW5kT3duIiwiYXNzaWduIiwicGljayIsIm9pdGVyYXRlZSIsIm9taXQiLCJTdHJpbmciLCJkZWZhdWx0cyIsInByb3BzIiwiY2xvbmUiLCJ0YXAiLCJpbnRlcmNlcHRvciIsImlzTWF0Y2giLCJlcSIsImFTdGFjayIsImJTdGFjayIsImNsYXNzTmFtZSIsImFyZUFycmF5cyIsImFDdG9yIiwiYkN0b3IiLCJwb3AiLCJpc0VxdWFsIiwiaXNFbXB0eSIsImlzU3RyaW5nIiwiaXNFbGVtZW50Iiwibm9kZVR5cGUiLCJ0eXBlIiwiSW50OEFycmF5IiwiaXNGaW5pdGUiLCJwYXJzZUZsb2F0IiwiaXNOdW1iZXIiLCJpc051bGwiLCJpc1VuZGVmaW5lZCIsIm5vQ29uZmxpY3QiLCJjb25zdGFudCIsIm5vb3AiLCJwcm9wZXJ0eU9mIiwibWF0Y2hlcyIsImFjY3VtIiwiRGF0ZSIsImdldFRpbWUiLCJlc2NhcGVNYXAiLCImIiwiPCIsIj4iLCJcIiIsIiciLCJgIiwidW5lc2NhcGVNYXAiLCJjcmVhdGVFc2NhcGVyIiwiZXNjYXBlciIsIm1hdGNoIiwiam9pbiIsInRlc3RSZWdleHAiLCJSZWdFeHAiLCJyZXBsYWNlUmVnZXhwIiwic3RyaW5nIiwidGVzdCIsInJlcGxhY2UiLCJlc2NhcGUiLCJ1bmVzY2FwZSIsImZhbGxiYWNrIiwiaWRDb3VudGVyIiwidW5pcXVlSWQiLCJwcmVmaXgiLCJpZCIsInRlbXBsYXRlU2V0dGluZ3MiLCJldmFsdWF0ZSIsImludGVycG9sYXRlIiwibm9NYXRjaCIsImVzY2FwZXMiLCJcXCIsIlxyIiwiXG4iLCLigKgiLCLigKkiLCJlc2NhcGVDaGFyIiwidGVtcGxhdGUiLCJ0ZXh0Iiwic2V0dGluZ3MiLCJvbGRTZXR0aW5ncyIsIm9mZnNldCIsInZhcmlhYmxlIiwicmVuZGVyIiwiZSIsImRhdGEiLCJhcmd1bWVudCIsImNoYWluIiwiaW5zdGFuY2UiLCJfY2hhaW4iLCJtaXhpbiIsInZhbHVlT2YiLCJ0b0pTT04iLCJ1bmRlZmluZWQiLCJVdGlscyIsIltvYmplY3QgT2JqZWN0XSIsInN1Y2Nlc3MiLCJlcnJvciIsInByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9wZXJhdGlvbiIsImNhbGxiYWNrcyIsImdldENhbGxiYWNrcyIsIl9zdHJpbmdDb21wYXJlIiwiY2hlY2siLCJ0b0xvd2VyQ2FzZSIsIl9pc0VsZW1lbnQiLCJlbCIsInRhZyIsIkhUTUxFbGVtZW50IiwidGFnTmFtZSIsImltYWdlIiwiYW5jaG9yIiwicHJvbWlzZXNBbGxTZXR0bGVkIiwicHJvbWlzZXMiLCJfbWFwUHJvbWlzZXMiLCJzdG9wT25FcnJvciIsInByb21pc2VDb3VudCIsInJlc3VsdE9iaiIsImFib3J0ZWQiLCJzZXR0bGVkQ291bnQiLCJzdG9yZVJlc3BvbnNlIiwicmVzcG9uc2UiLCJpc0Vycm9yIiwic2V0dGxlbWVudCIsInN0YXRlIiwicmVhc29uIiwidGhlbiIsInJlcyIsImVyciIsIkV2ZW50RW1pdHRlckV4dGVuZGVkXzEiLCJ1dGlsc18xIiwiaHRtbEhlbHBlclJlc3BvbnNpdmVNb2R1bGVfMSIsInByb2Nlc3NPbkxvYWQiLCJwcm9jZXNzT25SZXNpemUiLCJsb2FkaW5nSW1hZ2VVcmwiLCJlcnJvckltYWdlVXJsIiwiYXR0cmlidXRlcyIsImxvYWRpbmdJbWFnZSIsImVycm9ySW1hZ2UiLCJkcGkiLCJpbWFnZVNvdXJjZSIsImZpbGVTb3VyY2UiLCJlbmFibGVPZmZsaW5lIiwiZW5hYmxlUmVzcG9uc2l2ZSIsInJlc3BvbnNpdmVQYXJhbXMiLCJIdG1sSGVscGVyIiwiRXZlbnRFbWl0dGVyRXh0ZW5kZWQiLCJjb25maWciLCJzdXBlciIsInVybFRlbXBsYXRlIiwic2VydmVyIiwicmVzcG9uc2l2ZSIsIkh0bWxIZWxwZXJSZXNwb25zaXZlTW9kdWxlIiwiX2luaXQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicHJvY2Vzc0FsbCIsImVtaXQiLCJlbGVtZW50IiwibG9hZGluZ0ltYWdlVXJpIiwiZ2V0QXR0cmlidXRlIiwiX3NldFVybCIsImJhY2tnckltYWdlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJpbWciLCJ1cmwiLCJlbEF0dHIiLCJfZ2V0QXR0ciIsInNyYyIsInN0eWxlIiwidmlzaWJpbGl0eSIsIkltYWdlIiwib25lcnJvciIsIm9ubG9hZCIsImNhdGNoIiwiYXR0ciIsInNwbGl0Iiwic2V0QXR0cmlidXRlIiwiYmFja2dyb3VuZEltYWdlIiwiX2dldEJhY2tncm91bmRTcmMiLCJlbGVtZW50cyIsImNhblJlc3BvbnNpdmUiLCJ2YWwiLCJkYXRhVmFsIiwiSlNPTiIsInBhcnNlIiwiZXZhbHVhdGVEYXRhQXR0ciIsIm9wZXJhdGlvbnMiLCJidWlsZFByb21pc2UiLCJfZGVmYXVsdFByb2Nlc3NTZXR0aW5ncyIsIk5vZGVMaXN0Iiwid3JhcHBlZEVsZW1lbnRzIiwiX3dyYXBFbGVtZW50cyIsIm9mZmxpbmUiLCJkYXRhVXJsIiwiX2dldFVybCIsIl9zZXRMb2FkaW5nVXJsIiwicmVzcG9uc2l2ZUltYWdlIiwiZmluYWxVcmwiLCJfc2V0RXJyb3JVcmwiLCJwcm9jZXNzZWQiLCJmYWlsZWQiLCJfdHJpZ2dlck9uUHJvY2Vzc2VkIiwicmVzcG9uc2l2ZVNlbGVjdG9yIiwicmVzcG9uc2l2ZUVsZW1lbnRzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvY2VzcyIsImV2ZW50c18xIiwidW5kZXJzY29yZV8xIiwiRXZlbnRBcmdzIiwiY2FuY2VsZWQiLCJFdmVudEVtaXR0ZXIiLCJldmVudE5hbWUiLCJsaXN0ZW5lciIsImFkZExpc3RlbmVyIiwiX2V2ZW50cyIsImxhc3RMaXN0ZW5lciIsImFsbExpc3RlbmVycyIsInJlbW92ZUxpc3RlbmVyIiwiX21heExpc3RlbmVycyIsImFyZyIsImRlZmF1bHRNYXhMaXN0ZW5lcnMiLCJzZXRNYXhMaXN0ZW5lcnMiLCJlciIsImhhbmRsZXIiLCJsaXN0ZW5lcnMiLCJuZXdMaXN0ZW5lciIsIndhcm5lZCIsImNvbnNvbGUiLCJ0cmFjZSIsIm9uIiwiZyIsImZpcmVkIiwic3BsaWNlIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwibGlzdGVuZXJDb3VudCIsImV2bGlzdGVuZXIiLCJlbWl0dGVyIiwiREVGQVVMVF9SRVNQT05TSVZFX09QRVJBVElPTlMiLCJwYXJhbXMiLCJyZXNpemUiLCJpc1VzZXJSZXNpemUiLCJodG1sSGVscGVyIiwib2Zmc2V0V2lkdGgiLCJvZmZzZXRIZWlnaHQiLCJzdHIiLCJwYXJhbSIsInBhcmFtUGFpciIsInBhcmFtTmFtZSIsInBhcmFtVmFsdWVzIiwiaW1nVXJsIiwicHJvdG9jb2xSZSIsInNlcnZlclJlIiwiYXBpSWRSZSIsImFwcElkIiwib3BlcmF0aW9uc1JhdyIsIm9wZXJhdGlvbnNUb1BhcnNlIiwic3Vic3RyaW5nIiwicGFyc2VQYXJhbXNTdHJpbmciLCJkYXRhc2V0IiwicGFpciIsImNsIiwicmVnZXgiLCJwYXJlbnRFbCIsInBhcmVudE5vZGUiLCJwYXJlbnRXaWR0aCIsIml0ZW1TdHlsZSIsInBsIiwicHIiLCJibCIsImJyIiwiYWJzIiwicGFyZW50SGVpZ2h0IiwicHQiLCJwYiIsImJ0IiwiYmIiLCJkZXZpY2VQaXhlbFJhdGlvIiwicGl4ZWxEZW5zaXR5IiwiZ2V0RGV2aWNlUGl4ZWxSYXRpbyIsInBhcmFtc1N0ciIsImFyciIsImRhdGFTcmMiLCJpbWdXaWR0aCIsImlzSW1hZ2UiLCJnZXRJbWdQYXJhbXMiLCJnZXRJbWFnZVdpZHRoIiwiZ2V0QmFja2dyb3VuZFdpZHRoIiwiZ2V0SW1nU3JjIiwicHJvdG9jb2wiLCJzY2hlbWUiLCJnZXRQaXhlbFJhdGlvIiwicGFyYW1zU3RyaW5nIiwidyIsInBkIiwiZmlsbCIsImgiLCJnZXRJbWFnZUhlaWdodCIsImdldEJhY2tncm91bmRIZWlnaHQiLCJnZXRJbWdQYXJhbXNTdHJpbmciLCJkZWZhdWx0UGFyYW1zIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxlQUFBQyxJQUNBRCxPQUFBLHVCQUFBSCxHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLGtCQUFBRCxJQUVBRCxFQUFBLGtCQUFBQyxJQVJBLENBU0NLLEtBQUEsV0FDRCxtQkNOQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsT0FBQUMsRUFBQUQsR0FBQU4sUUFHQSxJQUFBQyxFQUFBTSxFQUFBRCxJQUNBRSxFQUFBRixFQUNBRyxHQUFBLEVBQ0FULFlBVUEsT0FOQVUsRUFBQUosR0FBQUssS0FBQVYsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUssR0FHQUosRUFBQVEsR0FBQSxFQUdBUixFQUFBRCxRQXZCQSxJQUFBTyxLQTREQSxPQWhDQUYsRUFBQU8sRUFBQUYsRUFHQUwsRUFBQVEsRUFBQU4sRUFHQUYsRUFBQVMsRUFBQSxTQUFBZCxFQUFBZSxFQUFBQyxHQUNBWCxFQUFBWSxFQUFBakIsRUFBQWUsSUFDQUcsT0FBQUMsZUFBQW5CLEVBQUFlLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWCxFQUFBa0IsRUFBQSxTQUFBdEIsR0FDQSxJQUFBZSxFQUFBZixLQUFBdUIsV0FDQSxXQUEyQixPQUFBdkIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSSxFQUFBUyxFQUFBRSxFQUFBLElBQUFBLEdBQ0FB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b0I5TCxFQUFNaFUsT0FHdkN3ZixFQUFlM2lCLEtBQUtrakIsbUJBQW1CNUQsT0FDcEMsQ0FDSCxJQUFJNkQsR0FDQTVELFFBQ0lxRCxFQUFHVixFQUNIVyxHQUFJaEIsSUFHWmMsRUFBZTNpQixLQUFLa2pCLG1CQUFtQkMsR0FLM0MsT0FGQXhJLEVBQU1BLEVBQUk5RyxRQUFRLGVBQWdCOE8sR0FDbENoSSxFQUFNQSxFQUFJOUcsUUFBUSxRQUFTc0QsRUFBTThJIiwiZmlsZSI6InNhc2hpZG8tcmVzcG9uc2l2ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiU2FzaGlkb1Jlc3BvbnNpdmVcIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiU2FzaGlkb1Jlc3BvbnNpdmVcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiU2FzaGlkb1Jlc3BvbnNpdmVcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgZDFiODhhNzQxNWNhODA3OTI3YWIiLCIvLyAgICAgVW5kZXJzY29yZS5qcyAxLjguM1xuLy8gICAgIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG4vLyAgICAgKGMpIDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbihmdW5jdGlvbigpIHtcblxuICAvLyBCYXNlbGluZSBzZXR1cFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIGluIHRoZSBicm93c2VyLCBvciBgZXhwb3J0c2Agb24gdGhlIHNlcnZlci5cbiAgdmFyIHJvb3QgPSB0aGlzO1xuXG4gIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgX2AgdmFyaWFibGUuXG4gIHZhciBwcmV2aW91c1VuZGVyc2NvcmUgPSByb290Ll87XG5cbiAgLy8gU2F2ZSBieXRlcyBpbiB0aGUgbWluaWZpZWQgKGJ1dCBub3QgZ3ppcHBlZCkgdmVyc2lvbjpcbiAgdmFyIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsIE9ialByb3RvID0gT2JqZWN0LnByb3RvdHlwZSwgRnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuXG4gIC8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLlxuICB2YXJcbiAgICBwdXNoICAgICAgICAgICAgID0gQXJyYXlQcm90by5wdXNoLFxuICAgIHNsaWNlICAgICAgICAgICAgPSBBcnJheVByb3RvLnNsaWNlLFxuICAgIHRvU3RyaW5nICAgICAgICAgPSBPYmpQcm90by50b1N0cmluZyxcbiAgICBoYXNPd25Qcm9wZXJ0eSAgID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbiAgLy8gQWxsICoqRUNNQVNjcmlwdCA1KiogbmF0aXZlIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9ucyB0aGF0IHdlIGhvcGUgdG8gdXNlXG4gIC8vIGFyZSBkZWNsYXJlZCBoZXJlLlxuICB2YXJcbiAgICBuYXRpdmVJc0FycmF5ICAgICAgPSBBcnJheS5pc0FycmF5LFxuICAgIG5hdGl2ZUtleXMgICAgICAgICA9IE9iamVjdC5rZXlzLFxuICAgIG5hdGl2ZUJpbmQgICAgICAgICA9IEZ1bmNQcm90by5iaW5kLFxuICAgIG5hdGl2ZUNyZWF0ZSAgICAgICA9IE9iamVjdC5jcmVhdGU7XG5cbiAgLy8gTmFrZWQgZnVuY3Rpb24gcmVmZXJlbmNlIGZvciBzdXJyb2dhdGUtcHJvdG90eXBlLXN3YXBwaW5nLlxuICB2YXIgQ3RvciA9IGZ1bmN0aW9uKCl7fTtcblxuICAvLyBDcmVhdGUgYSBzYWZlIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yIHVzZSBiZWxvdy5cbiAgdmFyIF8gPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgXykgcmV0dXJuIG9iajtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgXykpIHJldHVybiBuZXcgXyhvYmopO1xuICAgIHRoaXMuX3dyYXBwZWQgPSBvYmo7XG4gIH07XG5cbiAgLy8gRXhwb3J0IHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgKipOb2RlLmpzKiosIHdpdGhcbiAgLy8gYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgZm9yIHRoZSBvbGQgYHJlcXVpcmUoKWAgQVBJLiBJZiB3ZSdyZSBpblxuICAvLyB0aGUgYnJvd3NlciwgYWRkIGBfYCBhcyBhIGdsb2JhbCBvYmplY3QuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF87XG4gICAgfVxuICAgIGV4cG9ydHMuXyA9IF87XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5fID0gXztcbiAgfVxuXG4gIC8vIEN1cnJlbnQgdmVyc2lvbi5cbiAgXy5WRVJTSU9OID0gJzEuOC4zJztcblxuICAvLyBJbnRlcm5hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gZWZmaWNpZW50IChmb3IgY3VycmVudCBlbmdpbmVzKSB2ZXJzaW9uXG4gIC8vIG9mIHRoZSBwYXNzZWQtaW4gY2FsbGJhY2ssIHRvIGJlIHJlcGVhdGVkbHkgYXBwbGllZCBpbiBvdGhlciBVbmRlcnNjb3JlXG4gIC8vIGZ1bmN0aW9ucy5cbiAgdmFyIG9wdGltaXplQ2IgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdDb3VudCkge1xuICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHJldHVybiBmdW5jO1xuICAgIHN3aXRjaCAoYXJnQ291bnQgPT0gbnVsbCA/IDMgOiBhcmdDb3VudCkge1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUsIG90aGVyKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBBIG1vc3RseS1pbnRlcm5hbCBmdW5jdGlvbiB0byBnZW5lcmF0ZSBjYWxsYmFja3MgdGhhdCBjYW4gYmUgYXBwbGllZFxuICAvLyB0byBlYWNoIGVsZW1lbnQgaW4gYSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgdGhlIGRlc2lyZWQgcmVzdWx0IOKAlCBlaXRoZXJcbiAgLy8gaWRlbnRpdHksIGFuIGFyYml0cmFyeSBjYWxsYmFjaywgYSBwcm9wZXJ0eSBtYXRjaGVyLCBvciBhIHByb3BlcnR5IGFjY2Vzc29yLlxuICB2YXIgY2IgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIF8uaWRlbnRpdHk7XG4gICAgaWYgKF8uaXNGdW5jdGlvbih2YWx1ZSkpIHJldHVybiBvcHRpbWl6ZUNiKHZhbHVlLCBjb250ZXh0LCBhcmdDb3VudCk7XG4gICAgaWYgKF8uaXNPYmplY3QodmFsdWUpKSByZXR1cm4gXy5tYXRjaGVyKHZhbHVlKTtcbiAgICByZXR1cm4gXy5wcm9wZXJ0eSh2YWx1ZSk7XG4gIH07XG4gIF8uaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBjYih2YWx1ZSwgY29udGV4dCwgSW5maW5pdHkpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhc3NpZ25lciBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVBc3NpZ25lciA9IGZ1bmN0aW9uKGtleXNGdW5jLCB1bmRlZmluZWRPbmx5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoIDwgMiB8fCBvYmogPT0gbnVsbCkgcmV0dXJuIG9iajtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF0sXG4gICAgICAgICAgICBrZXlzID0ga2V5c0Z1bmMoc291cmNlKSxcbiAgICAgICAgICAgIGwgPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICBpZiAoIXVuZGVmaW5lZE9ubHkgfHwgb2JqW2tleV0gPT09IHZvaWQgMCkgb2JqW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhIG5ldyBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIGFub3RoZXIuXG4gIHZhciBiYXNlQ3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KHByb3RvdHlwZSkpIHJldHVybiB7fTtcbiAgICBpZiAobmF0aXZlQ3JlYXRlKSByZXR1cm4gbmF0aXZlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgQ3Rvci5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBDdG9yO1xuICAgIEN0b3IucHJvdG90eXBlID0gbnVsbDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBwcm9wZXJ0eSA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogPT0gbnVsbCA/IHZvaWQgMCA6IG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgLy8gSGVscGVyIGZvciBjb2xsZWN0aW9uIG1ldGhvZHMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb2xsZWN0aW9uXG4gIC8vIHNob3VsZCBiZSBpdGVyYXRlZCBhcyBhbiBhcnJheSBvciBhcyBhbiBvYmplY3RcbiAgLy8gUmVsYXRlZDogaHR0cDovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGhcbiAgLy8gQXZvaWRzIGEgdmVyeSBuYXN0eSBpT1MgOCBKSVQgYnVnIG9uIEFSTS02NC4gIzIwOTRcbiAgdmFyIE1BWF9BUlJBWV9JTkRFWCA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG4gIHZhciBnZXRMZW5ndGggPSBwcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gIHZhciBpc0FycmF5TGlrZSA9IGZ1bmN0aW9uKGNvbGxlY3Rpb24pIHtcbiAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pO1xuICAgIHJldHVybiB0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInICYmIGxlbmd0aCA+PSAwICYmIGxlbmd0aCA8PSBNQVhfQVJSQVlfSU5ERVg7XG4gIH07XG5cbiAgLy8gQ29sbGVjdGlvbiBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBUaGUgY29ybmVyc3RvbmUsIGFuIGBlYWNoYCBpbXBsZW1lbnRhdGlvbiwgYWthIGBmb3JFYWNoYC5cbiAgLy8gSGFuZGxlcyByYXcgb2JqZWN0cyBpbiBhZGRpdGlvbiB0byBhcnJheS1saWtlcy4gVHJlYXRzIGFsbFxuICAvLyBzcGFyc2UgYXJyYXktbGlrZXMgYXMgaWYgdGhleSB3ZXJlIGRlbnNlLlxuICBfLmVhY2ggPSBfLmZvckVhY2ggPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIgaSwgbGVuZ3RoO1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSB7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaXRlcmF0ZWUob2JqW2ldLCBpLCBvYmopO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRlZShvYmpba2V5c1tpXV0sIGtleXNbaV0sIG9iaik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQuXG4gIF8ubWFwID0gXy5jb2xsZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuICAgICAgICByZXN1bHRzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgcmVzdWx0c1tpbmRleF0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIHJlZHVjaW5nIGZ1bmN0aW9uIGl0ZXJhdGluZyBsZWZ0IG9yIHJpZ2h0LlxuICBmdW5jdGlvbiBjcmVhdGVSZWR1Y2UoZGlyKSB7XG4gICAgLy8gT3B0aW1pemVkIGl0ZXJhdG9yIGZ1bmN0aW9uIGFzIHVzaW5nIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAvLyBpbiB0aGUgbWFpbiBmdW5jdGlvbiB3aWxsIGRlb3B0aW1pemUgdGhlLCBzZWUgIzE5OTEuXG4gICAgZnVuY3Rpb24gaXRlcmF0b3Iob2JqLCBpdGVyYXRlZSwgbWVtbywga2V5cywgaW5kZXgsIGxlbmd0aCkge1xuICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgICBtZW1vID0gaXRlcmF0ZWUobWVtbywgb2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGNvbnRleHQpIHtcbiAgICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCwgNCk7XG4gICAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuICAgICAgICAgIGluZGV4ID0gZGlyID4gMCA/IDAgOiBsZW5ndGggLSAxO1xuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBpbml0aWFsIHZhbHVlIGlmIG5vbmUgaXMgcHJvdmlkZWQuXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgbWVtbyA9IG9ialtrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleF07XG4gICAgICAgIGluZGV4ICs9IGRpcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpdGVyYXRvcihvYmosIGl0ZXJhdGVlLCBtZW1vLCBrZXlzLCBpbmRleCwgbGVuZ3RoKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLFxuICAvLyBvciBgZm9sZGxgLlxuICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGNyZWF0ZVJlZHVjZSgxKTtcblxuICAvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC5cbiAgXy5yZWR1Y2VSaWdodCA9IF8uZm9sZHIgPSBjcmVhdGVSZWR1Y2UoLTEpO1xuXG4gIC8vIFJldHVybiB0aGUgZmlyc3QgdmFsdWUgd2hpY2ggcGFzc2VzIGEgdHJ1dGggdGVzdC4gQWxpYXNlZCBhcyBgZGV0ZWN0YC5cbiAgXy5maW5kID0gXy5kZXRlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBrZXk7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgIGtleSA9IF8uZmluZEluZGV4KG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ID0gXy5maW5kS2V5KG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKGtleSAhPT0gdm9pZCAwICYmIGtleSAhPT0gLTEpIHJldHVybiBvYmpba2V5XTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLlxuICBfLmZpbHRlciA9IF8uc2VsZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHMucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIGEgdHJ1dGggdGVzdCBmYWlscy5cbiAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubmVnYXRlKGNiKHByZWRpY2F0ZSkpLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgd2hldGhlciBhbGwgb2YgdGhlIGVsZW1lbnRzIG1hdGNoIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgYWxsYC5cbiAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAoIXByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIGF0IGxlYXN0IG9uZSBlbGVtZW50IGluIHRoZSBvYmplY3QgbWF0Y2hlcyBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYGFueWAuXG4gIF8uc29tZSA9IF8uYW55ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgdGhlIGFycmF5IG9yIG9iamVjdCBjb250YWlucyBhIGdpdmVuIGl0ZW0gKHVzaW5nIGA9PT1gKS5cbiAgLy8gQWxpYXNlZCBhcyBgaW5jbHVkZXNgIGFuZCBgaW5jbHVkZWAuXG4gIF8uY29udGFpbnMgPSBfLmluY2x1ZGVzID0gXy5pbmNsdWRlID0gZnVuY3Rpb24ob2JqLCBpdGVtLCBmcm9tSW5kZXgsIGd1YXJkKSB7XG4gICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ICE9ICdudW1iZXInIHx8IGd1YXJkKSBmcm9tSW5kZXggPSAwO1xuICAgIHJldHVybiBfLmluZGV4T2Yob2JqLCBpdGVtLCBmcm9tSW5kZXgpID49IDA7XG4gIH07XG5cbiAgLy8gSW52b2tlIGEgbWV0aG9kICh3aXRoIGFyZ3VtZW50cykgb24gZXZlcnkgaXRlbSBpbiBhIGNvbGxlY3Rpb24uXG4gIF8uaW52b2tlID0gZnVuY3Rpb24ob2JqLCBtZXRob2QpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICB2YXIgaXNGdW5jID0gXy5pc0Z1bmN0aW9uKG1ldGhvZCk7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBmdW5jID0gaXNGdW5jID8gbWV0aG9kIDogdmFsdWVbbWV0aG9kXTtcbiAgICAgIHJldHVybiBmdW5jID09IG51bGwgPyBmdW5jIDogZnVuYy5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS5cbiAgXy5wbHVjayA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5wcm9wZXJ0eShrZXkpKTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaWx0ZXJgOiBzZWxlY3Rpbmcgb25seSBvYmplY3RzXG4gIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8ud2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmluZGA6IGdldHRpbmcgdGhlIGZpcnN0IG9iamVjdFxuICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmZpbmRXaGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcbiAgICByZXR1cm4gXy5maW5kKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gLUluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSAtSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgPiByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA+IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gLUluZmluaXR5ICYmIHJlc3VsdCA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbWluaW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cbiAgXy5taW4gPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IEluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSBJbmZpbml0eSxcbiAgICAgICAgdmFsdWUsIGNvbXB1dGVkO1xuICAgIGlmIChpdGVyYXRlZSA9PSBudWxsICYmIG9iaiAhPSBudWxsKSB7XG4gICAgICBvYmogPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBvYmpbaV07XG4gICAgICAgIGlmICh2YWx1ZSA8IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KTtcbiAgICAgICAgaWYgKGNvbXB1dGVkIDwgbGFzdENvbXB1dGVkIHx8IGNvbXB1dGVkID09PSBJbmZpbml0eSAmJiByZXN1bHQgPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFNodWZmbGUgYSBjb2xsZWN0aW9uLCB1c2luZyB0aGUgbW9kZXJuIHZlcnNpb24gb2YgdGhlXG4gIC8vIFtGaXNoZXItWWF0ZXMgc2h1ZmZsZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GaXNoZXLigJNZYXRlc19zaHVmZmxlKS5cbiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHNldCA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBzZXQubGVuZ3RoO1xuICAgIHZhciBzaHVmZmxlZCA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwLCByYW5kOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmFuZCA9IF8ucmFuZG9tKDAsIGluZGV4KTtcbiAgICAgIGlmIChyYW5kICE9PSBpbmRleCkgc2h1ZmZsZWRbaW5kZXhdID0gc2h1ZmZsZWRbcmFuZF07XG4gICAgICBzaHVmZmxlZFtyYW5kXSA9IHNldFtpbmRleF07XG4gICAgfVxuICAgIHJldHVybiBzaHVmZmxlZDtcbiAgfTtcblxuICAvLyBTYW1wbGUgKipuKiogcmFuZG9tIHZhbHVlcyBmcm9tIGEgY29sbGVjdGlvbi5cbiAgLy8gSWYgKipuKiogaXMgbm90IHNwZWNpZmllZCwgcmV0dXJucyBhIHNpbmdsZSByYW5kb20gZWxlbWVudC5cbiAgLy8gVGhlIGludGVybmFsIGBndWFyZGAgYXJndW1lbnQgYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgbWFwYC5cbiAgXy5zYW1wbGUgPSBmdW5jdGlvbihvYmosIG4sIGd1YXJkKSB7XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkge1xuICAgICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgICAgcmV0dXJuIG9ialtfLnJhbmRvbShvYmoubGVuZ3RoIC0gMSldO1xuICAgIH1cbiAgICByZXR1cm4gXy5zaHVmZmxlKG9iaikuc2xpY2UoMCwgTWF0aC5tYXgoMCwgbikpO1xuICB9O1xuXG4gIC8vIFNvcnQgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiBwcm9kdWNlZCBieSBhbiBpdGVyYXRlZS5cbiAgXy5zb3J0QnkgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgcmV0dXJuIF8ucGx1Y2soXy5tYXAob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICBjcml0ZXJpYTogaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KVxuICAgICAgfTtcbiAgICB9KS5zb3J0KGZ1bmN0aW9uKGxlZnQsIHJpZ2h0KSB7XG4gICAgICB2YXIgYSA9IGxlZnQuY3JpdGVyaWE7XG4gICAgICB2YXIgYiA9IHJpZ2h0LmNyaXRlcmlhO1xuICAgICAgaWYgKGEgIT09IGIpIHtcbiAgICAgICAgaWYgKGEgPiBiIHx8IGEgPT09IHZvaWQgMCkgcmV0dXJuIDE7XG4gICAgICAgIGlmIChhIDwgYiB8fCBiID09PSB2b2lkIDApIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsZWZ0LmluZGV4IC0gcmlnaHQuaW5kZXg7XG4gICAgfSksICd2YWx1ZScpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHVzZWQgZm9yIGFnZ3JlZ2F0ZSBcImdyb3VwIGJ5XCIgb3BlcmF0aW9ucy5cbiAgdmFyIGdyb3VwID0gZnVuY3Rpb24oYmVoYXZpb3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGtleSA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgb2JqKTtcbiAgICAgICAgYmVoYXZpb3IocmVzdWx0LCB2YWx1ZSwga2V5KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEdyb3VwcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLiBQYXNzIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGVcbiAgLy8gdG8gZ3JvdXAgYnksIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBjcml0ZXJpb24uXG4gIF8uZ3JvdXBCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIGlmIChfLmhhcyhyZXN1bHQsIGtleSkpIHJlc3VsdFtrZXldLnB1c2godmFsdWUpOyBlbHNlIHJlc3VsdFtrZXldID0gW3ZhbHVlXTtcbiAgfSk7XG5cbiAgLy8gSW5kZXhlcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLCBzaW1pbGFyIHRvIGBncm91cEJ5YCwgYnV0IGZvclxuICAvLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuXG4gIF8uaW5kZXhCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIC8vIENvdW50cyBpbnN0YW5jZXMgb2YgYW4gb2JqZWN0IHRoYXQgZ3JvdXAgYnkgYSBjZXJ0YWluIGNyaXRlcmlvbi4gUGFzc1xuICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgLy8gY3JpdGVyaW9uLlxuICBfLmNvdW50QnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoXy5oYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XSsrOyBlbHNlIHJlc3VsdFtrZXldID0gMTtcbiAgfSk7XG5cbiAgLy8gU2FmZWx5IGNyZWF0ZSBhIHJlYWwsIGxpdmUgYXJyYXkgZnJvbSBhbnl0aGluZyBpdGVyYWJsZS5cbiAgXy50b0FycmF5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFvYmopIHJldHVybiBbXTtcbiAgICBpZiAoXy5pc0FycmF5KG9iaikpIHJldHVybiBzbGljZS5jYWxsKG9iaik7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHJldHVybiBfLm1hcChvYmosIF8uaWRlbnRpdHkpO1xuICAgIHJldHVybiBfLnZhbHVlcyhvYmopO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIGFuIG9iamVjdC5cbiAgXy5zaXplID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gMDtcbiAgICByZXR1cm4gaXNBcnJheUxpa2Uob2JqKSA/IG9iai5sZW5ndGggOiBfLmtleXMob2JqKS5sZW5ndGg7XG4gIH07XG5cbiAgLy8gU3BsaXQgYSBjb2xsZWN0aW9uIGludG8gdHdvIGFycmF5czogb25lIHdob3NlIGVsZW1lbnRzIGFsbCBzYXRpc2Z5IHRoZSBnaXZlblxuICAvLyBwcmVkaWNhdGUsIGFuZCBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIGRvIG5vdCBzYXRpc2Z5IHRoZSBwcmVkaWNhdGUuXG4gIF8ucGFydGl0aW9uID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBwYXNzID0gW10sIGZhaWwgPSBbXTtcbiAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHtcbiAgICAgIChwcmVkaWNhdGUodmFsdWUsIGtleSwgb2JqKSA/IHBhc3MgOiBmYWlsKS5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW3Bhc3MsIGZhaWxdO1xuICB9O1xuXG4gIC8vIEFycmF5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgaGVhZGAgYW5kIGB0YWtlYC4gVGhlICoqZ3VhcmQqKiBjaGVja1xuICAvLyBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG4gIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbMF07XG4gICAgcmV0dXJuIF8uaW5pdGlhbChhcnJheSwgYXJyYXkubGVuZ3RoIC0gbik7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgbGFzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEVzcGVjaWFsbHkgdXNlZnVsIG9uXG4gIC8vIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIGFsbCB0aGUgdmFsdWVzIGluXG4gIC8vIHRoZSBhcnJheSwgZXhjbHVkaW5nIHRoZSBsYXN0IE4uXG4gIF8uaW5pdGlhbCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCAwLCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSAobiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pKSk7XG4gIH07XG5cbiAgLy8gR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGxhc3QgTlxuICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuICBfLmxhc3QgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIF8ucmVzdChhcnJheSwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gbikpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGZpcnN0IGVudHJ5IG9mIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgdGFpbGAgYW5kIGBkcm9wYC5cbiAgLy8gRXNwZWNpYWxseSB1c2VmdWwgb24gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgYW4gKipuKiogd2lsbCByZXR1cm5cbiAgLy8gdGhlIHJlc3QgTiB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuICBfLnJlc3QgPSBfLnRhaWwgPSBfLmRyb3AgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgbiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pO1xuICB9O1xuXG4gIC8vIFRyaW0gb3V0IGFsbCBmYWxzeSB2YWx1ZXMgZnJvbSBhbiBhcnJheS5cbiAgXy5jb21wYWN0ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIF8uaWRlbnRpdHkpO1xuICB9O1xuXG4gIC8vIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGEgcmVjdXJzaXZlIGBmbGF0dGVuYCBmdW5jdGlvbi5cbiAgdmFyIGZsYXR0ZW4gPSBmdW5jdGlvbihpbnB1dCwgc2hhbGxvdywgc3RyaWN0LCBzdGFydEluZGV4KSB7XG4gICAgdmFyIG91dHB1dCA9IFtdLCBpZHggPSAwO1xuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4IHx8IDAsIGxlbmd0aCA9IGdldExlbmd0aChpbnB1dCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHZhbHVlID0gaW5wdXRbaV07XG4gICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWUpICYmIChfLmlzQXJyYXkodmFsdWUpIHx8IF8uaXNBcmd1bWVudHModmFsdWUpKSkge1xuICAgICAgICAvL2ZsYXR0ZW4gY3VycmVudCBsZXZlbCBvZiBhcnJheSBvciBhcmd1bWVudHMgb2JqZWN0XG4gICAgICAgIGlmICghc2hhbGxvdykgdmFsdWUgPSBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBzdHJpY3QpO1xuICAgICAgICB2YXIgaiA9IDAsIGxlbiA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgb3V0cHV0Lmxlbmd0aCArPSBsZW47XG4gICAgICAgIHdoaWxlIChqIDwgbGVuKSB7XG4gICAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlW2orK107XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXN0cmljdCkge1xuICAgICAgICBvdXRwdXRbaWR4KytdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH07XG5cbiAgLy8gRmxhdHRlbiBvdXQgYW4gYXJyYXksIGVpdGhlciByZWN1cnNpdmVseSAoYnkgZGVmYXVsdCksIG9yIGp1c3Qgb25lIGxldmVsLlxuICBfLmZsYXR0ZW4gPSBmdW5jdGlvbihhcnJheSwgc2hhbGxvdykge1xuICAgIHJldHVybiBmbGF0dGVuKGFycmF5LCBzaGFsbG93LCBmYWxzZSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgdmVyc2lvbiBvZiB0aGUgYXJyYXkgdGhhdCBkb2VzIG5vdCBjb250YWluIHRoZSBzcGVjaWZpZWQgdmFsdWUocykuXG4gIF8ud2l0aG91dCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIF8uZGlmZmVyZW5jZShhcnJheSwgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGEgZHVwbGljYXRlLWZyZWUgdmVyc2lvbiBvZiB0aGUgYXJyYXkuIElmIHRoZSBhcnJheSBoYXMgYWxyZWFkeVxuICAvLyBiZWVuIHNvcnRlZCwgeW91IGhhdmUgdGhlIG9wdGlvbiBvZiB1c2luZyBhIGZhc3RlciBhbGdvcml0aG0uXG4gIC8vIEFsaWFzZWQgYXMgYHVuaXF1ZWAuXG4gIF8udW5pcSA9IF8udW5pcXVlID0gZnVuY3Rpb24oYXJyYXksIGlzU29ydGVkLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGlmICghXy5pc0Jvb2xlYW4oaXNTb3J0ZWQpKSB7XG4gICAgICBjb250ZXh0ID0gaXRlcmF0ZWU7XG4gICAgICBpdGVyYXRlZSA9IGlzU29ydGVkO1xuICAgICAgaXNTb3J0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGl0ZXJhdGVlICE9IG51bGwpIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgc2VlbiA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2ldLFxuICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSwgaSwgYXJyYXkpIDogdmFsdWU7XG4gICAgICBpZiAoaXNTb3J0ZWQpIHtcbiAgICAgICAgaWYgKCFpIHx8IHNlZW4gIT09IGNvbXB1dGVkKSByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIHNlZW4gPSBjb21wdXRlZDtcbiAgICAgIH0gZWxzZSBpZiAoaXRlcmF0ZWUpIHtcbiAgICAgICAgaWYgKCFfLmNvbnRhaW5zKHNlZW4sIGNvbXB1dGVkKSkge1xuICAgICAgICAgIHNlZW4ucHVzaChjb21wdXRlZCk7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFfLmNvbnRhaW5zKHJlc3VsdCwgdmFsdWUpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIHVuaW9uOiBlYWNoIGRpc3RpbmN0IGVsZW1lbnQgZnJvbSBhbGwgb2ZcbiAgLy8gdGhlIHBhc3NlZC1pbiBhcnJheXMuXG4gIF8udW5pb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXy51bmlxKGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlKSk7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGV2ZXJ5IGl0ZW0gc2hhcmVkIGJldHdlZW4gYWxsIHRoZVxuICAvLyBwYXNzZWQtaW4gYXJyYXlzLlxuICBfLmludGVyc2VjdGlvbiA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBhcmdzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IGFycmF5W2ldO1xuICAgICAgaWYgKF8uY29udGFpbnMocmVzdWx0LCBpdGVtKSkgY29udGludWU7XG4gICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGFyZ3NMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLCBpdGVtKSkgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaiA9PT0gYXJnc0xlbmd0aCkgcmVzdWx0LnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gVGFrZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG9uZSBhcnJheSBhbmQgYSBudW1iZXIgb2Ygb3RoZXIgYXJyYXlzLlxuICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLlxuICBfLmRpZmZlcmVuY2UgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciByZXN0ID0gZmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUsIDEpO1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgcmV0dXJuICFfLmNvbnRhaW5zKHJlc3QsIHZhbHVlKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBaaXAgdG9nZXRoZXIgbXVsdGlwbGUgbGlzdHMgaW50byBhIHNpbmdsZSBhcnJheSAtLSBlbGVtZW50cyB0aGF0IHNoYXJlXG4gIC8vIGFuIGluZGV4IGdvIHRvZ2V0aGVyLlxuICBfLnppcCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBfLnVuemlwKGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQ29tcGxlbWVudCBvZiBfLnppcC4gVW56aXAgYWNjZXB0cyBhbiBhcnJheSBvZiBhcnJheXMgYW5kIGdyb3Vwc1xuICAvLyBlYWNoIGFycmF5J3MgZWxlbWVudHMgb24gc2hhcmVkIGluZGljZXNcbiAgXy51bnppcCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ICYmIF8ubWF4KGFycmF5LCBnZXRMZW5ndGgpLmxlbmd0aCB8fCAwO1xuICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IF8ucGx1Y2soYXJyYXksIGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBDb252ZXJ0cyBsaXN0cyBpbnRvIG9iamVjdHMuIFBhc3MgZWl0aGVyIGEgc2luZ2xlIGFycmF5IG9mIGBba2V5LCB2YWx1ZV1gXG4gIC8vIHBhaXJzLCBvciB0d28gcGFyYWxsZWwgYXJyYXlzIG9mIHRoZSBzYW1lIGxlbmd0aCAtLSBvbmUgb2Yga2V5cywgYW5kIG9uZSBvZlxuICAvLyB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXMuXG4gIF8ub2JqZWN0ID0gZnVuY3Rpb24obGlzdCwgdmFsdWVzKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgobGlzdCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICByZXN1bHRbbGlzdFtpXV0gPSB2YWx1ZXNbaV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRbbGlzdFtpXVswXV0gPSBsaXN0W2ldWzFdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGZpbmRJbmRleCBhbmQgZmluZExhc3RJbmRleCBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoZGlyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTtcbiAgICAgIHZhciBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIGZvciAoOyBpbmRleCA+PSAwICYmIGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSBkaXIpIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuICB9XG5cbiAgLy8gUmV0dXJucyB0aGUgZmlyc3QgaW5kZXggb24gYW4gYXJyYXktbGlrZSB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0XG4gIF8uZmluZEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoMSk7XG4gIF8uZmluZExhc3RJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKC0xKTtcblxuICAvLyBVc2UgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgdGhlIHNtYWxsZXN0IGluZGV4IGF0IHdoaWNoXG4gIC8vIGFuIG9iamVjdCBzaG91bGQgYmUgaW5zZXJ0ZWQgc28gYXMgdG8gbWFpbnRhaW4gb3JkZXIuIFVzZXMgYmluYXJ5IHNlYXJjaC5cbiAgXy5zb3J0ZWRJbmRleCA9IGZ1bmN0aW9uKGFycmF5LCBvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCwgMSk7XG4gICAgdmFyIHZhbHVlID0gaXRlcmF0ZWUob2JqKTtcbiAgICB2YXIgbG93ID0gMCwgaGlnaCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgIHZhciBtaWQgPSBNYXRoLmZsb29yKChsb3cgKyBoaWdoKSAvIDIpO1xuICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W21pZF0pIDwgdmFsdWUpIGxvdyA9IG1pZCArIDE7IGVsc2UgaGlnaCA9IG1pZDtcbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbiAgfTtcblxuICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBpbmRleE9mIGFuZCBsYXN0SW5kZXhPZiBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gY3JlYXRlSW5kZXhGaW5kZXIoZGlyLCBwcmVkaWNhdGVGaW5kLCBzb3J0ZWRJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgaXRlbSwgaWR4KSB7XG4gICAgICB2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICBpZiAodHlwZW9mIGlkeCA9PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAoZGlyID4gMCkge1xuICAgICAgICAgICAgaSA9IGlkeCA+PSAwID8gaWR4IDogTWF0aC5tYXgoaWR4ICsgbGVuZ3RoLCBpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGlkeCA+PSAwID8gTWF0aC5taW4oaWR4ICsgMSwgbGVuZ3RoKSA6IGlkeCArIGxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc29ydGVkSW5kZXggJiYgaWR4ICYmIGxlbmd0aCkge1xuICAgICAgICBpZHggPSBzb3J0ZWRJbmRleChhcnJheSwgaXRlbSk7XG4gICAgICAgIHJldHVybiBhcnJheVtpZHhdID09PSBpdGVtID8gaWR4IDogLTE7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbSAhPT0gaXRlbSkge1xuICAgICAgICBpZHggPSBwcmVkaWNhdGVGaW5kKHNsaWNlLmNhbGwoYXJyYXksIGksIGxlbmd0aCksIF8uaXNOYU4pO1xuICAgICAgICByZXR1cm4gaWR4ID49IDAgPyBpZHggKyBpIDogLTE7XG4gICAgICB9XG4gICAgICBmb3IgKGlkeCA9IGRpciA+IDAgPyBpIDogbGVuZ3RoIC0gMTsgaWR4ID49IDAgJiYgaWR4IDwgbGVuZ3RoOyBpZHggKz0gZGlyKSB7XG4gICAgICAgIGlmIChhcnJheVtpZHhdID09PSBpdGVtKSByZXR1cm4gaWR4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gIH1cblxuICAvLyBSZXR1cm4gdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGl0ZW0gaW4gYW4gYXJyYXksXG4gIC8vIG9yIC0xIGlmIHRoZSBpdGVtIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgYXJyYXkuXG4gIC8vIElmIHRoZSBhcnJheSBpcyBsYXJnZSBhbmQgYWxyZWFkeSBpbiBzb3J0IG9yZGVyLCBwYXNzIGB0cnVlYFxuICAvLyBmb3IgKippc1NvcnRlZCoqIHRvIHVzZSBiaW5hcnkgc2VhcmNoLlxuICBfLmluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigxLCBfLmZpbmRJbmRleCwgXy5zb3J0ZWRJbmRleCk7XG4gIF8ubGFzdEluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigtMSwgXy5maW5kTGFzdEluZGV4KTtcblxuICAvLyBHZW5lcmF0ZSBhbiBpbnRlZ2VyIEFycmF5IGNvbnRhaW5pbmcgYW4gYXJpdGhtZXRpYyBwcm9ncmVzc2lvbi4gQSBwb3J0IG9mXG4gIC8vIHRoZSBuYXRpdmUgUHl0aG9uIGByYW5nZSgpYCBmdW5jdGlvbi4gU2VlXG4gIC8vIFt0aGUgUHl0aG9uIGRvY3VtZW50YXRpb25dKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9mdW5jdGlvbnMuaHRtbCNyYW5nZSkuXG4gIF8ucmFuZ2UgPSBmdW5jdGlvbihzdGFydCwgc3RvcCwgc3RlcCkge1xuICAgIGlmIChzdG9wID09IG51bGwpIHtcbiAgICAgIHN0b3AgPSBzdGFydCB8fCAwO1xuICAgICAgc3RhcnQgPSAwO1xuICAgIH1cbiAgICBzdGVwID0gc3RlcCB8fCAxO1xuXG4gICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KE1hdGguY2VpbCgoc3RvcCAtIHN0YXJ0KSAvIHN0ZXApLCAwKTtcbiAgICB2YXIgcmFuZ2UgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKywgc3RhcnQgKz0gc3RlcCkge1xuICAgICAgcmFuZ2VbaWR4XSA9IHN0YXJ0O1xuICAgIH1cblxuICAgIHJldHVybiByYW5nZTtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiAoYWhlbSkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIERldGVybWluZXMgd2hldGhlciB0byBleGVjdXRlIGEgZnVuY3Rpb24gYXMgYSBjb25zdHJ1Y3RvclxuICAvLyBvciBhIG5vcm1hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm92aWRlZCBhcmd1bWVudHNcbiAgdmFyIGV4ZWN1dGVCb3VuZCA9IGZ1bmN0aW9uKHNvdXJjZUZ1bmMsIGJvdW5kRnVuYywgY29udGV4dCwgY2FsbGluZ0NvbnRleHQsIGFyZ3MpIHtcbiAgICBpZiAoIShjYWxsaW5nQ29udGV4dCBpbnN0YW5jZW9mIGJvdW5kRnVuYykpIHJldHVybiBzb3VyY2VGdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIHZhciBzZWxmID0gYmFzZUNyZWF0ZShzb3VyY2VGdW5jLnByb3RvdHlwZSk7XG4gICAgdmFyIHJlc3VsdCA9IHNvdXJjZUZ1bmMuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgaWYgKF8uaXNPYmplY3QocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDtcbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvLyBDcmVhdGUgYSBmdW5jdGlvbiBib3VuZCB0byBhIGdpdmVuIG9iamVjdCAoYXNzaWduaW5nIGB0aGlzYCwgYW5kIGFyZ3VtZW50cyxcbiAgLy8gb3B0aW9uYWxseSkuIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBGdW5jdGlvbi5iaW5kYCBpZlxuICAvLyBhdmFpbGFibGUuXG4gIF8uYmluZCA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQpIHtcbiAgICBpZiAobmF0aXZlQmluZCAmJiBmdW5jLmJpbmQgPT09IG5hdGl2ZUJpbmQpIHJldHVybiBuYXRpdmVCaW5kLmFwcGx5KGZ1bmMsIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbicpO1xuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgY29udGV4dCwgdGhpcywgYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gYm91bmQ7XG4gIH07XG5cbiAgLy8gUGFydGlhbGx5IGFwcGx5IGEgZnVuY3Rpb24gYnkgY3JlYXRpbmcgYSB2ZXJzaW9uIHRoYXQgaGFzIGhhZCBzb21lIG9mIGl0c1xuICAvLyBhcmd1bWVudHMgcHJlLWZpbGxlZCwgd2l0aG91dCBjaGFuZ2luZyBpdHMgZHluYW1pYyBgdGhpc2AgY29udGV4dC4gXyBhY3RzXG4gIC8vIGFzIGEgcGxhY2Vob2xkZXIsIGFsbG93aW5nIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMgdG8gYmUgcHJlLWZpbGxlZC5cbiAgXy5wYXJ0aWFsID0gZnVuY3Rpb24oZnVuYykge1xuICAgIHZhciBib3VuZEFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcG9zaXRpb24gPSAwLCBsZW5ndGggPSBib3VuZEFyZ3MubGVuZ3RoO1xuICAgICAgdmFyIGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBhcmdzW2ldID0gYm91bmRBcmdzW2ldID09PSBfID8gYXJndW1lbnRzW3Bvc2l0aW9uKytdIDogYm91bmRBcmdzW2ldO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHBvc2l0aW9uIDwgYXJndW1lbnRzLmxlbmd0aCkgYXJncy5wdXNoKGFyZ3VtZW50c1twb3NpdGlvbisrXSk7XG4gICAgICByZXR1cm4gZXhlY3V0ZUJvdW5kKGZ1bmMsIGJvdW5kLCB0aGlzLCB0aGlzLCBhcmdzKTtcbiAgICB9O1xuICAgIHJldHVybiBib3VuZDtcbiAgfTtcblxuICAvLyBCaW5kIGEgbnVtYmVyIG9mIGFuIG9iamVjdCdzIG1ldGhvZHMgdG8gdGhhdCBvYmplY3QuIFJlbWFpbmluZyBhcmd1bWVudHNcbiAgLy8gYXJlIHRoZSBtZXRob2QgbmFtZXMgdG8gYmUgYm91bmQuIFVzZWZ1bCBmb3IgZW5zdXJpbmcgdGhhdCBhbGwgY2FsbGJhY2tzXG4gIC8vIGRlZmluZWQgb24gYW4gb2JqZWN0IGJlbG9uZyB0byBpdC5cbiAgXy5iaW5kQWxsID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGksIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsIGtleTtcbiAgICBpZiAobGVuZ3RoIDw9IDEpIHRocm93IG5ldyBFcnJvcignYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lcycpO1xuICAgIGZvciAoaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gYXJndW1lbnRzW2ldO1xuICAgICAgb2JqW2tleV0gPSBfLmJpbmQob2JqW2tleV0sIG9iaik7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy5cbiAgXy5tZW1vaXplID0gZnVuY3Rpb24oZnVuYywgaGFzaGVyKSB7XG4gICAgdmFyIG1lbW9pemUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBjYWNoZSA9IG1lbW9pemUuY2FjaGU7XG4gICAgICB2YXIgYWRkcmVzcyA9ICcnICsgKGhhc2hlciA/IGhhc2hlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5KTtcbiAgICAgIGlmICghXy5oYXMoY2FjaGUsIGFkZHJlc3MpKSBjYWNoZVthZGRyZXNzXSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBjYWNoZVthZGRyZXNzXTtcbiAgICB9O1xuICAgIG1lbW9pemUuY2FjaGUgPSB7fTtcbiAgICByZXR1cm4gbWVtb2l6ZTtcbiAgfTtcblxuICAvLyBEZWxheXMgYSBmdW5jdGlvbiBmb3IgdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIGFuZCB0aGVuIGNhbGxzXG4gIC8vIGl0IHdpdGggdGhlIGFyZ3VtZW50cyBzdXBwbGllZC5cbiAgXy5kZWxheSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfSwgd2FpdCk7XG4gIH07XG5cbiAgLy8gRGVmZXJzIGEgZnVuY3Rpb24sIHNjaGVkdWxpbmcgaXQgdG8gcnVuIGFmdGVyIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzXG4gIC8vIGNsZWFyZWQuXG4gIF8uZGVmZXIgPSBfLnBhcnRpYWwoXy5kZWxheSwgXywgMSk7XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXG4gIC8vIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxuICAvLyBhcyBtdWNoIGFzIGl0IGNhbiwgd2l0aG91dCBldmVyIGdvaW5nIG1vcmUgdGhhbiBvbmNlIHBlciBgd2FpdGAgZHVyYXRpb247XG4gIC8vIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzXG4gIC8vIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuICBfLnRocm90dGxlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgIHZhciBjb250ZXh0LCBhcmdzLCByZXN1bHQ7XG4gICAgdmFyIHRpbWVvdXQgPSBudWxsO1xuICAgIHZhciBwcmV2aW91cyA9IDA7XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogXy5ub3coKTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5vdyA9IF8ubm93KCk7XG4gICAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHByZXZpb3VzID0gbm93O1xuICAgICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuICAgICAgY29udGV4dCA9IHRoaXM7XG4gICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4gIC8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAgLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4gIF8uZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG5cbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsYXN0ID0gXy5ub3coKSAtIHRpbWVzdGFtcDtcblxuICAgICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB0aW1lc3RhbXAgPSBfLm5vdygpO1xuICAgICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgIGlmIChjYWxsTm93KSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLFxuICAvLyBhbGxvd2luZyB5b3UgdG8gYWRqdXN0IGFyZ3VtZW50cywgcnVuIGNvZGUgYmVmb3JlIGFuZCBhZnRlciwgYW5kXG4gIC8vIGNvbmRpdGlvbmFsbHkgZXhlY3V0ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG4gIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHtcbiAgICByZXR1cm4gXy5wYXJ0aWFsKHdyYXBwZXIsIGZ1bmMpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBuZWdhdGVkIHZlcnNpb24gb2YgdGhlIHBhc3NlZC1pbiBwcmVkaWNhdGUuXG4gIF8ubmVnYXRlID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICFwcmVkaWNhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBhIGxpc3Qgb2YgZnVuY3Rpb25zLCBlYWNoXG4gIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuXG4gIF8uY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSA9IHN0YXJ0O1xuICAgICAgdmFyIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB3aGlsZSAoaS0tKSByZXN1bHQgPSBhcmdzW2ldLmNhbGwodGhpcywgcmVzdWx0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb24gYW5kIGFmdGVyIHRoZSBOdGggY2FsbC5cbiAgXy5hZnRlciA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tdGltZXMgPCAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgdXAgdG8gKGJ1dCBub3QgaW5jbHVkaW5nKSB0aGUgTnRoIGNhbGwuXG4gIF8uYmVmb3JlID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICB2YXIgbWVtbztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA+IDApIHtcbiAgICAgICAgbWVtbyA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aW1lcyA8PSAxKSBmdW5jID0gbnVsbDtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93XG4gIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uXG4gIF8ub25jZSA9IF8ucGFydGlhbChfLmJlZm9yZSwgMik7XG5cbiAgLy8gT2JqZWN0IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gS2V5cyBpbiBJRSA8IDkgdGhhdCB3b24ndCBiZSBpdGVyYXRlZCBieSBgZm9yIGtleSBpbiAuLi5gIGFuZCB0aHVzIG1pc3NlZC5cbiAgdmFyIGhhc0VudW1CdWcgPSAhe3RvU3RyaW5nOiBudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgndG9TdHJpbmcnKTtcbiAgdmFyIG5vbkVudW1lcmFibGVQcm9wcyA9IFsndmFsdWVPZicsICdpc1Byb3RvdHlwZU9mJywgJ3RvU3RyaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAncHJvcGVydHlJc0VudW1lcmFibGUnLCAnaGFzT3duUHJvcGVydHknLCAndG9Mb2NhbGVTdHJpbmcnXTtcblxuICBmdW5jdGlvbiBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cykge1xuICAgIHZhciBub25FbnVtSWR4ID0gbm9uRW51bWVyYWJsZVByb3BzLmxlbmd0aDtcbiAgICB2YXIgY29uc3RydWN0b3IgPSBvYmouY29uc3RydWN0b3I7XG4gICAgdmFyIHByb3RvID0gKF8uaXNGdW5jdGlvbihjb25zdHJ1Y3RvcikgJiYgY29uc3RydWN0b3IucHJvdG90eXBlKSB8fCBPYmpQcm90bztcblxuICAgIC8vIENvbnN0cnVjdG9yIGlzIGEgc3BlY2lhbCBjYXNlLlxuICAgIHZhciBwcm9wID0gJ2NvbnN0cnVjdG9yJztcbiAgICBpZiAoXy5oYXMob2JqLCBwcm9wKSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkga2V5cy5wdXNoKHByb3ApO1xuXG4gICAgd2hpbGUgKG5vbkVudW1JZHgtLSkge1xuICAgICAgcHJvcCA9IG5vbkVudW1lcmFibGVQcm9wc1tub25FbnVtSWR4XTtcbiAgICAgIGlmIChwcm9wIGluIG9iaiAmJiBvYmpbcHJvcF0gIT09IHByb3RvW3Byb3BdICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSB7XG4gICAgICAgIGtleXMucHVzaChwcm9wKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSZXRyaWV2ZSB0aGUgbmFtZXMgb2YgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMuXG4gIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBPYmplY3Qua2V5c2BcbiAgXy5rZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICBpZiAobmF0aXZlS2V5cykgcmV0dXJuIG5hdGl2ZUtleXMob2JqKTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChfLmhhcyhvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIGFsbCB0aGUgcHJvcGVydHkgbmFtZXMgb2YgYW4gb2JqZWN0LlxuICBfLmFsbEtleXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIFtdO1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG4gICAgLy8gQWhlbSwgSUUgPCA5LlxuICAgIGlmIChoYXNFbnVtQnVnKSBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cyk7XG4gICAgcmV0dXJuIGtleXM7XG4gIH07XG5cbiAgLy8gUmV0cmlldmUgdGhlIHZhbHVlcyBvZiBhbiBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICBfLnZhbHVlcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIHZhciB2YWx1ZXMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlc1tpXSA9IG9ialtrZXlzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIG9iamVjdFxuICAvLyBJbiBjb250cmFzdCB0byBfLm1hcCBpdCByZXR1cm5zIGFuIG9iamVjdFxuICBfLm1hcE9iamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICBfLmtleXMob2JqKSxcbiAgICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHRzID0ge30sXG4gICAgICAgICAgY3VycmVudEtleTtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgY3VycmVudEtleSA9IGtleXNbaW5kZXhdO1xuICAgICAgICByZXN1bHRzW2N1cnJlbnRLZXldID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gQ29udmVydCBhbiBvYmplY3QgaW50byBhIGxpc3Qgb2YgYFtrZXksIHZhbHVlXWAgcGFpcnMuXG4gIF8ucGFpcnMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgcGFpcnMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXJzW2ldID0gW2tleXNbaV0sIG9ialtrZXlzW2ldXV07XG4gICAgfVxuICAgIHJldHVybiBwYWlycztcbiAgfTtcblxuICAvLyBJbnZlcnQgdGhlIGtleXMgYW5kIHZhbHVlcyBvZiBhbiBvYmplY3QuIFRoZSB2YWx1ZXMgbXVzdCBiZSBzZXJpYWxpemFibGUuXG4gIF8uaW52ZXJ0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdFtvYmpba2V5c1tpXV1dID0ga2V5c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBzb3J0ZWQgbGlzdCBvZiB0aGUgZnVuY3Rpb24gbmFtZXMgYXZhaWxhYmxlIG9uIHRoZSBvYmplY3QuXG4gIC8vIEFsaWFzZWQgYXMgYG1ldGhvZHNgXG4gIF8uZnVuY3Rpb25zID0gXy5tZXRob2RzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIG5hbWVzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihvYmpba2V5XSkpIG5hbWVzLnB1c2goa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWVzLnNvcnQoKTtcbiAgfTtcblxuICAvLyBFeHRlbmQgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIHByb3BlcnRpZXMgaW4gcGFzc2VkLWluIG9iamVjdChzKS5cbiAgXy5leHRlbmQgPSBjcmVhdGVBc3NpZ25lcihfLmFsbEtleXMpO1xuXG4gIC8vIEFzc2lnbnMgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIG93biBwcm9wZXJ0aWVzIGluIHRoZSBwYXNzZWQtaW4gb2JqZWN0KHMpXG4gIC8vIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduKVxuICBfLmV4dGVuZE93biA9IF8uYXNzaWduID0gY3JlYXRlQXNzaWduZXIoXy5rZXlzKTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBrZXkgb24gYW4gb2JqZWN0IHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3RcbiAgXy5maW5kS2V5ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaiksIGtleTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmIChwcmVkaWNhdGUob2JqW2tleV0sIGtleSwgb2JqKSkgcmV0dXJuIGtleTtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IG9ubHkgY29udGFpbmluZyB0aGUgd2hpdGVsaXN0ZWQgcHJvcGVydGllcy5cbiAgXy5waWNrID0gZnVuY3Rpb24ob2JqZWN0LCBvaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0ge30sIG9iaiA9IG9iamVjdCwgaXRlcmF0ZWUsIGtleXM7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChfLmlzRnVuY3Rpb24ob2l0ZXJhdGVlKSkge1xuICAgICAga2V5cyA9IF8uYWxsS2V5cyhvYmopO1xuICAgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKG9pdGVyYXRlZSwgY29udGV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleXMgPSBmbGF0dGVuKGFyZ3VtZW50cywgZmFsc2UsIGZhbHNlLCAxKTtcbiAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqKSB7IHJldHVybiBrZXkgaW4gb2JqOyB9O1xuICAgICAgb2JqID0gT2JqZWN0KG9iaik7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgaWYgKGl0ZXJhdGVlKHZhbHVlLCBrZXksIG9iaikpIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCB3aXRob3V0IHRoZSBibGFja2xpc3RlZCBwcm9wZXJ0aWVzLlxuICBfLm9taXQgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihpdGVyYXRlZSkpIHtcbiAgICAgIGl0ZXJhdGVlID0gXy5uZWdhdGUoaXRlcmF0ZWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIga2V5cyA9IF8ubWFwKGZsYXR0ZW4oYXJndW1lbnRzLCBmYWxzZSwgZmFsc2UsIDEpLCBTdHJpbmcpO1xuICAgICAgaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHJldHVybiAhXy5jb250YWlucyhrZXlzLCBrZXkpO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIF8ucGljayhvYmosIGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBGaWxsIGluIGEgZ2l2ZW4gb2JqZWN0IHdpdGggZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICBfLmRlZmF1bHRzID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzLCB0cnVlKTtcblxuICAvLyBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gdGhlIGdpdmVuIHByb3RvdHlwZSBvYmplY3QuXG4gIC8vIElmIGFkZGl0aW9uYWwgcHJvcGVydGllcyBhcmUgcHJvdmlkZWQgdGhlbiB0aGV5IHdpbGwgYmUgYWRkZWQgdG8gdGhlXG4gIC8vIGNyZWF0ZWQgb2JqZWN0LlxuICBfLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3RvdHlwZSwgcHJvcHMpIHtcbiAgICB2YXIgcmVzdWx0ID0gYmFzZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgIGlmIChwcm9wcykgXy5leHRlbmRPd24ocmVzdWx0LCBwcm9wcyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBDcmVhdGUgYSAoc2hhbGxvdy1jbG9uZWQpIGR1cGxpY2F0ZSBvZiBhbiBvYmplY3QuXG4gIF8uY2xvbmUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIG9iajtcbiAgICByZXR1cm4gXy5pc0FycmF5KG9iaikgPyBvYmouc2xpY2UoKSA6IF8uZXh0ZW5kKHt9LCBvYmopO1xuICB9O1xuXG4gIC8vIEludm9rZXMgaW50ZXJjZXB0b3Igd2l0aCB0aGUgb2JqLCBhbmQgdGhlbiByZXR1cm5zIG9iai5cbiAgLy8gVGhlIHByaW1hcnkgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0byBcInRhcCBpbnRvXCIgYSBtZXRob2QgY2hhaW4sIGluXG4gIC8vIG9yZGVyIHRvIHBlcmZvcm0gb3BlcmF0aW9ucyBvbiBpbnRlcm1lZGlhdGUgcmVzdWx0cyB3aXRoaW4gdGhlIGNoYWluLlxuICBfLnRhcCA9IGZ1bmN0aW9uKG9iaiwgaW50ZXJjZXB0b3IpIHtcbiAgICBpbnRlcmNlcHRvcihvYmopO1xuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB3aGV0aGVyIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBzZXQgb2YgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8uaXNNYXRjaCA9IGZ1bmN0aW9uKG9iamVjdCwgYXR0cnMpIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhhdHRycyksIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuICFsZW5ndGg7XG4gICAgdmFyIG9iaiA9IE9iamVjdChvYmplY3QpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKGF0dHJzW2tleV0gIT09IG9ialtrZXldIHx8ICEoa2V5IGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cblxuICAvLyBJbnRlcm5hbCByZWN1cnNpdmUgY29tcGFyaXNvbiBmdW5jdGlvbiBmb3IgYGlzRXF1YWxgLlxuICB2YXIgZXEgPSBmdW5jdGlvbihhLCBiLCBhU3RhY2ssIGJTdGFjaykge1xuICAgIC8vIElkZW50aWNhbCBvYmplY3RzIGFyZSBlcXVhbC4gYDAgPT09IC0wYCwgYnV0IHRoZXkgYXJlbid0IGlkZW50aWNhbC5cbiAgICAvLyBTZWUgdGhlIFtIYXJtb255IGBlZ2FsYCBwcm9wb3NhbF0oaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9aGFybW9ueTplZ2FsKS5cbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIGEgIT09IDAgfHwgMSAvIGEgPT09IDEgLyBiO1xuICAgIC8vIEEgc3RyaWN0IGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYG51bGwgPT0gdW5kZWZpbmVkYC5cbiAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkgcmV0dXJuIGEgPT09IGI7XG4gICAgLy8gVW53cmFwIGFueSB3cmFwcGVkIG9iamVjdHMuXG4gICAgaWYgKGEgaW5zdGFuY2VvZiBfKSBhID0gYS5fd3JhcHBlZDtcbiAgICBpZiAoYiBpbnN0YW5jZW9mIF8pIGIgPSBiLl93cmFwcGVkO1xuICAgIC8vIENvbXBhcmUgYFtbQ2xhc3NdXWAgbmFtZXMuXG4gICAgdmFyIGNsYXNzTmFtZSA9IHRvU3RyaW5nLmNhbGwoYSk7XG4gICAgaWYgKGNsYXNzTmFtZSAhPT0gdG9TdHJpbmcuY2FsbChiKSkgcmV0dXJuIGZhbHNlO1xuICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XG4gICAgICAvLyBTdHJpbmdzLCBudW1iZXJzLCByZWd1bGFyIGV4cHJlc3Npb25zLCBkYXRlcywgYW5kIGJvb2xlYW5zIGFyZSBjb21wYXJlZCBieSB2YWx1ZS5cbiAgICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG4gICAgICAvLyBSZWdFeHBzIGFyZSBjb2VyY2VkIHRvIHN0cmluZ3MgZm9yIGNvbXBhcmlzb24gKE5vdGU6ICcnICsgL2EvaSA9PT0gJy9hL2knKVxuICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcbiAgICAgICAgLy8gUHJpbWl0aXZlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBvYmplY3Qgd3JhcHBlcnMgYXJlIGVxdWl2YWxlbnQ7IHRodXMsIGBcIjVcImAgaXNcbiAgICAgICAgLy8gZXF1aXZhbGVudCB0byBgbmV3IFN0cmluZyhcIjVcIilgLlxuICAgICAgICByZXR1cm4gJycgKyBhID09PSAnJyArIGI7XG4gICAgICBjYXNlICdbb2JqZWN0IE51bWJlcl0nOlxuICAgICAgICAvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLlxuICAgICAgICAvLyBPYmplY3QoTmFOKSBpcyBlcXVpdmFsZW50IHRvIE5hTlxuICAgICAgICBpZiAoK2EgIT09ICthKSByZXR1cm4gK2IgIT09ICtiO1xuICAgICAgICAvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLlxuICAgICAgICByZXR1cm4gK2EgPT09IDAgPyAxIC8gK2EgPT09IDEgLyBiIDogK2EgPT09ICtiO1xuICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzpcbiAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpclxuICAgICAgICAvLyBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMuIE5vdGUgdGhhdCBpbnZhbGlkIGRhdGVzIHdpdGggbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zXG4gICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC5cbiAgICAgICAgcmV0dXJuICthID09PSArYjtcbiAgICB9XG5cbiAgICB2YXIgYXJlQXJyYXlzID0gY2xhc3NOYW1lID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIGlmICghYXJlQXJyYXlzKSB7XG4gICAgICBpZiAodHlwZW9mIGEgIT0gJ29iamVjdCcgfHwgdHlwZW9mIGIgIT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gT2JqZWN0cyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVpdmFsZW50LCBidXQgYE9iamVjdGBzIG9yIGBBcnJheWBzXG4gICAgICAvLyBmcm9tIGRpZmZlcmVudCBmcmFtZXMgYXJlLlxuICAgICAgdmFyIGFDdG9yID0gYS5jb25zdHJ1Y3RvciwgYkN0b3IgPSBiLmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKGFDdG9yICE9PSBiQ3RvciAmJiAhKF8uaXNGdW5jdGlvbihhQ3RvcikgJiYgYUN0b3IgaW5zdGFuY2VvZiBhQ3RvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaXNGdW5jdGlvbihiQ3RvcikgJiYgYkN0b3IgaW5zdGFuY2VvZiBiQ3RvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCdjb25zdHJ1Y3RvcicgaW4gYSAmJiAnY29uc3RydWN0b3InIGluIGIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQXNzdW1lIGVxdWFsaXR5IGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpY1xuICAgIC8vIHN0cnVjdHVyZXMgaXMgYWRhcHRlZCBmcm9tIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMsIGFic3RyYWN0IG9wZXJhdGlvbiBgSk9gLlxuXG4gICAgLy8gSW5pdGlhbGl6aW5nIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIC8vIEl0J3MgZG9uZSBoZXJlIHNpbmNlIHdlIG9ubHkgbmVlZCB0aGVtIGZvciBvYmplY3RzIGFuZCBhcnJheXMgY29tcGFyaXNvbi5cbiAgICBhU3RhY2sgPSBhU3RhY2sgfHwgW107XG4gICAgYlN0YWNrID0gYlN0YWNrIHx8IFtdO1xuICAgIHZhciBsZW5ndGggPSBhU3RhY2subGVuZ3RoO1xuICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mXG4gICAgICAvLyB1bmlxdWUgbmVzdGVkIHN0cnVjdHVyZXMuXG4gICAgICBpZiAoYVN0YWNrW2xlbmd0aF0gPT09IGEpIHJldHVybiBiU3RhY2tbbGVuZ3RoXSA9PT0gYjtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnB1c2goYSk7XG4gICAgYlN0YWNrLnB1c2goYik7XG5cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cy5cbiAgICBpZiAoYXJlQXJyYXlzKSB7XG4gICAgICAvLyBDb21wYXJlIGFycmF5IGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeS5cbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKCFlcShhW2xlbmd0aF0sIGJbbGVuZ3RoXSwgYVN0YWNrLCBiU3RhY2spKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLlxuICAgICAgdmFyIGtleXMgPSBfLmtleXMoYSksIGtleTtcbiAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMgYmVmb3JlIGNvbXBhcmluZyBkZWVwIGVxdWFsaXR5LlxuICAgICAgaWYgKF8ua2V5cyhiKS5sZW5ndGggIT09IGxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIC8vIERlZXAgY29tcGFyZSBlYWNoIG1lbWJlclxuICAgICAgICBrZXkgPSBrZXlzW2xlbmd0aF07XG4gICAgICAgIGlmICghKF8uaGFzKGIsIGtleSkgJiYgZXEoYVtrZXldLCBiW2tleV0sIGFTdGFjaywgYlN0YWNrKSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBvYmplY3QgZnJvbSB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnBvcCgpO1xuICAgIGJTdGFjay5wb3AoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBQZXJmb3JtIGEgZGVlcCBjb21wYXJpc29uIHRvIGNoZWNrIGlmIHR3byBvYmplY3RzIGFyZSBlcXVhbC5cbiAgXy5pc0VxdWFsID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBlcShhLCBiKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIGFycmF5LCBzdHJpbmcsIG9yIG9iamVjdCBlbXB0eT9cbiAgLy8gQW4gXCJlbXB0eVwiIG9iamVjdCBoYXMgbm8gZW51bWVyYWJsZSBvd24tcHJvcGVydGllcy5cbiAgXy5pc0VtcHR5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSAmJiAoXy5pc0FycmF5KG9iaikgfHwgXy5pc1N0cmluZyhvYmopIHx8IF8uaXNBcmd1bWVudHMob2JqKSkpIHJldHVybiBvYmoubGVuZ3RoID09PSAwO1xuICAgIHJldHVybiBfLmtleXMob2JqKS5sZW5ndGggPT09IDA7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIERPTSBlbGVtZW50P1xuICBfLmlzRWxlbWVudCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiAhIShvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGFuIGFycmF5P1xuICAvLyBEZWxlZ2F0ZXMgdG8gRUNNQTUncyBuYXRpdmUgQXJyYXkuaXNBcnJheVxuICBfLmlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/XG4gIF8uaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBvYmo7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZSA9PT0gJ29iamVjdCcgJiYgISFvYmo7XG4gIH07XG5cbiAgLy8gQWRkIHNvbWUgaXNUeXBlIG1ldGhvZHM6IGlzQXJndW1lbnRzLCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNOdW1iZXIsIGlzRGF0ZSwgaXNSZWdFeHAsIGlzRXJyb3IuXG4gIF8uZWFjaChbJ0FyZ3VtZW50cycsICdGdW5jdGlvbicsICdTdHJpbmcnLCAnTnVtYmVyJywgJ0RhdGUnLCAnUmVnRXhwJywgJ0Vycm9yJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBfWydpcycgKyBuYW1lXSA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgJyArIG5hbWUgKyAnXSc7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gRGVmaW5lIGEgZmFsbGJhY2sgdmVyc2lvbiBvZiB0aGUgbWV0aG9kIGluIGJyb3dzZXJzIChhaGVtLCBJRSA8IDkpLCB3aGVyZVxuICAvLyB0aGVyZSBpc24ndCBhbnkgaW5zcGVjdGFibGUgXCJBcmd1bWVudHNcIiB0eXBlLlxuICBpZiAoIV8uaXNBcmd1bWVudHMoYXJndW1lbnRzKSkge1xuICAgIF8uaXNBcmd1bWVudHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBfLmhhcyhvYmosICdjYWxsZWUnKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gT3B0aW1pemUgYGlzRnVuY3Rpb25gIGlmIGFwcHJvcHJpYXRlLiBXb3JrIGFyb3VuZCBzb21lIHR5cGVvZiBidWdzIGluIG9sZCB2OCxcbiAgLy8gSUUgMTEgKCMxNjIxKSwgYW5kIGluIFNhZmFyaSA4ICgjMTkyOSkuXG4gIGlmICh0eXBlb2YgLy4vICE9ICdmdW5jdGlvbicgJiYgdHlwZW9mIEludDhBcnJheSAhPSAnb2JqZWN0Jykge1xuICAgIF8uaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJyB8fCBmYWxzZTtcbiAgICB9O1xuICB9XG5cbiAgLy8gSXMgYSBnaXZlbiBvYmplY3QgYSBmaW5pdGUgbnVtYmVyP1xuICBfLmlzRmluaXRlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIGlzRmluaXRlKG9iaikgJiYgIWlzTmFOKHBhcnNlRmxvYXQob2JqKSk7XG4gIH07XG5cbiAgLy8gSXMgdGhlIGdpdmVuIHZhbHVlIGBOYU5gPyAoTmFOIGlzIHRoZSBvbmx5IG51bWJlciB3aGljaCBkb2VzIG5vdCBlcXVhbCBpdHNlbGYpLlxuICBfLmlzTmFOID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIF8uaXNOdW1iZXIob2JqKSAmJiBvYmogIT09ICtvYmo7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIGJvb2xlYW4/XG4gIF8uaXNCb29sZWFuID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdHJ1ZSB8fCBvYmogPT09IGZhbHNlIHx8IHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgZXF1YWwgdG8gbnVsbD9cbiAgXy5pc051bGwgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSBudWxsO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgdW5kZWZpbmVkP1xuICBfLmlzVW5kZWZpbmVkID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdm9pZCAwO1xuICB9O1xuXG4gIC8vIFNob3J0Y3V0IGZ1bmN0aW9uIGZvciBjaGVja2luZyBpZiBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gcHJvcGVydHkgZGlyZWN0bHlcbiAgLy8gb24gaXRzZWxmIChpbiBvdGhlciB3b3Jkcywgbm90IG9uIGEgcHJvdG90eXBlKS5cbiAgXy5oYXMgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbiAgfTtcblxuICAvLyBVdGlsaXR5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJ1biBVbmRlcnNjb3JlLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHNcbiAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290Ll8gPSBwcmV2aW91c1VuZGVyc2NvcmU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdGVlcy5cbiAgXy5pZGVudGl0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS5cbiAgXy5jb25zdGFudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gIH07XG5cbiAgXy5ub29wID0gZnVuY3Rpb24oKXt9O1xuXG4gIF8ucHJvcGVydHkgPSBwcm9wZXJ0eTtcblxuICAvLyBHZW5lcmF0ZXMgYSBmdW5jdGlvbiBmb3IgYSBnaXZlbiBvYmplY3QgdGhhdCByZXR1cm5zIGEgZ2l2ZW4gcHJvcGVydHkuXG4gIF8ucHJvcGVydHlPZiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT0gbnVsbCA/IGZ1bmN0aW9uKCl7fSA6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIHByZWRpY2F0ZSBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mXG4gIC8vIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLm1hdGNoZXIgPSBfLm1hdGNoZXMgPSBmdW5jdGlvbihhdHRycykge1xuICAgIGF0dHJzID0gXy5leHRlbmRPd24oe30sIGF0dHJzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gXy5pc01hdGNoKG9iaiwgYXR0cnMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUnVuIGEgZnVuY3Rpb24gKipuKiogdGltZXMuXG4gIF8udGltZXMgPSBmdW5jdGlvbihuLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciBhY2N1bSA9IEFycmF5KE1hdGgubWF4KDAsIG4pKTtcbiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDEpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSBhY2N1bVtpXSA9IGl0ZXJhdGVlKGkpO1xuICAgIHJldHVybiBhY2N1bTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIG1pbiBhbmQgbWF4IChpbmNsdXNpdmUpLlxuICBfLnJhbmRvbSA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgaWYgKG1heCA9PSBudWxsKSB7XG4gICAgICBtYXggPSBtaW47XG4gICAgICBtaW4gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcbiAgfTtcblxuICAvLyBBIChwb3NzaWJseSBmYXN0ZXIpIHdheSB0byBnZXQgdGhlIGN1cnJlbnQgdGltZXN0YW1wIGFzIGFuIGludGVnZXIuXG4gIF8ubm93ID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB9O1xuXG4gICAvLyBMaXN0IG9mIEhUTUwgZW50aXRpZXMgZm9yIGVzY2FwaW5nLlxuICB2YXIgZXNjYXBlTWFwID0ge1xuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7JyxcbiAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICBcIidcIjogJyYjeDI3OycsXG4gICAgJ2AnOiAnJiN4NjA7J1xuICB9O1xuICB2YXIgdW5lc2NhcGVNYXAgPSBfLmludmVydChlc2NhcGVNYXApO1xuXG4gIC8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi5cbiAgdmFyIGNyZWF0ZUVzY2FwZXIgPSBmdW5jdGlvbihtYXApIHtcbiAgICB2YXIgZXNjYXBlciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbWFwW21hdGNoXTtcbiAgICB9O1xuICAgIC8vIFJlZ2V4ZXMgZm9yIGlkZW50aWZ5aW5nIGEga2V5IHRoYXQgbmVlZHMgdG8gYmUgZXNjYXBlZFxuICAgIHZhciBzb3VyY2UgPSAnKD86JyArIF8ua2V5cyhtYXApLmpvaW4oJ3wnKSArICcpJztcbiAgICB2YXIgdGVzdFJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UpO1xuICAgIHZhciByZXBsYWNlUmVnZXhwID0gUmVnRXhwKHNvdXJjZSwgJ2cnKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcgPT0gbnVsbCA/ICcnIDogJycgKyBzdHJpbmc7XG4gICAgICByZXR1cm4gdGVzdFJlZ2V4cC50ZXN0KHN0cmluZykgPyBzdHJpbmcucmVwbGFjZShyZXBsYWNlUmVnZXhwLCBlc2NhcGVyKSA6IHN0cmluZztcbiAgICB9O1xuICB9O1xuICBfLmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIoZXNjYXBlTWFwKTtcbiAgXy51bmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIodW5lc2NhcGVNYXApO1xuXG4gIC8vIElmIHRoZSB2YWx1ZSBvZiB0aGUgbmFtZWQgYHByb3BlcnR5YCBpcyBhIGZ1bmN0aW9uIHRoZW4gaW52b2tlIGl0IHdpdGggdGhlXG4gIC8vIGBvYmplY3RgIGFzIGNvbnRleHQ7IG90aGVyd2lzZSwgcmV0dXJuIGl0LlxuICBfLnJlc3VsdCA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHksIGZhbGxiYWNrKSB7XG4gICAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB2b2lkIDAgOiBvYmplY3RbcHJvcGVydHldO1xuICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICB2YWx1ZSA9IGZhbGxiYWNrO1xuICAgIH1cbiAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlLmNhbGwob2JqZWN0KSA6IHZhbHVlO1xuICB9O1xuXG4gIC8vIEdlbmVyYXRlIGEgdW5pcXVlIGludGVnZXIgaWQgKHVuaXF1ZSB3aXRoaW4gdGhlIGVudGlyZSBjbGllbnQgc2Vzc2lvbikuXG4gIC8vIFVzZWZ1bCBmb3IgdGVtcG9yYXJ5IERPTSBpZHMuXG4gIHZhciBpZENvdW50ZXIgPSAwO1xuICBfLnVuaXF1ZUlkID0gZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgdmFyIGlkID0gKytpZENvdW50ZXIgKyAnJztcbiAgICByZXR1cm4gcHJlZml4ID8gcHJlZml4ICsgaWQgOiBpZDtcbiAgfTtcblxuICAvLyBCeSBkZWZhdWx0LCBVbmRlcnNjb3JlIHVzZXMgRVJCLXN0eWxlIHRlbXBsYXRlIGRlbGltaXRlcnMsIGNoYW5nZSB0aGVcbiAgLy8gZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLlxuICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgZXZhbHVhdGUgICAgOiAvPCUoW1xcc1xcU10rPyklPi9nLFxuICAgIGludGVycG9sYXRlIDogLzwlPShbXFxzXFxTXSs/KSU+L2csXG4gICAgZXNjYXBlICAgICAgOiAvPCUtKFtcXHNcXFNdKz8pJT4vZ1xuICB9O1xuXG4gIC8vIFdoZW4gY3VzdG9taXppbmcgYHRlbXBsYXRlU2V0dGluZ3NgLCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBkZWZpbmUgYW5cbiAgLy8gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiBvciBlc2NhcGluZyByZWdleCwgd2UgbmVlZCBvbmUgdGhhdCBpc1xuICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC5cbiAgdmFyIG5vTWF0Y2ggPSAvKC4pXi87XG5cbiAgLy8gQ2VydGFpbiBjaGFyYWN0ZXJzIG5lZWQgdG8gYmUgZXNjYXBlZCBzbyB0aGF0IHRoZXkgY2FuIGJlIHB1dCBpbnRvIGFcbiAgLy8gc3RyaW5nIGxpdGVyYWwuXG4gIHZhciBlc2NhcGVzID0ge1xuICAgIFwiJ1wiOiAgICAgIFwiJ1wiLFxuICAgICdcXFxcJzogICAgICdcXFxcJyxcbiAgICAnXFxyJzogICAgICdyJyxcbiAgICAnXFxuJzogICAgICduJyxcbiAgICAnXFx1MjAyOCc6ICd1MjAyOCcsXG4gICAgJ1xcdTIwMjknOiAndTIwMjknXG4gIH07XG5cbiAgdmFyIGVzY2FwZXIgPSAvXFxcXHwnfFxccnxcXG58XFx1MjAyOHxcXHUyMDI5L2c7XG5cbiAgdmFyIGVzY2FwZUNoYXIgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgIHJldHVybiAnXFxcXCcgKyBlc2NhcGVzW21hdGNoXTtcbiAgfTtcblxuICAvLyBKYXZhU2NyaXB0IG1pY3JvLXRlbXBsYXRpbmcsIHNpbWlsYXIgdG8gSm9obiBSZXNpZydzIGltcGxlbWVudGF0aW9uLlxuICAvLyBVbmRlcnNjb3JlIHRlbXBsYXRpbmcgaGFuZGxlcyBhcmJpdHJhcnkgZGVsaW1pdGVycywgcHJlc2VydmVzIHdoaXRlc3BhY2UsXG4gIC8vIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLlxuICAvLyBOQjogYG9sZFNldHRpbmdzYCBvbmx5IGV4aXN0cyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncywgb2xkU2V0dGluZ3MpIHtcbiAgICBpZiAoIXNldHRpbmdzICYmIG9sZFNldHRpbmdzKSBzZXR0aW5ncyA9IG9sZFNldHRpbmdzO1xuICAgIHNldHRpbmdzID0gXy5kZWZhdWx0cyh7fSwgc2V0dGluZ3MsIF8udGVtcGxhdGVTZXR0aW5ncyk7XG5cbiAgICAvLyBDb21iaW5lIGRlbGltaXRlcnMgaW50byBvbmUgcmVndWxhciBleHByZXNzaW9uIHZpYSBhbHRlcm5hdGlvbi5cbiAgICB2YXIgbWF0Y2hlciA9IFJlZ0V4cChbXG4gICAgICAoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcbiAgICAgIChzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoKS5zb3VyY2UsXG4gICAgICAoc2V0dGluZ3MuZXZhbHVhdGUgfHwgbm9NYXRjaCkuc291cmNlXG4gICAgXS5qb2luKCd8JykgKyAnfCQnLCAnZycpO1xuXG4gICAgLy8gQ29tcGlsZSB0aGUgdGVtcGxhdGUgc291cmNlLCBlc2NhcGluZyBzdHJpbmcgbGl0ZXJhbHMgYXBwcm9wcmlhdGVseS5cbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBzb3VyY2UgPSBcIl9fcCs9J1wiO1xuICAgIHRleHQucmVwbGFjZShtYXRjaGVyLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlLCBpbnRlcnBvbGF0ZSwgZXZhbHVhdGUsIG9mZnNldCkge1xuICAgICAgc291cmNlICs9IHRleHQuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShlc2NhcGVyLCBlc2NhcGVDaGFyKTtcbiAgICAgIGluZGV4ID0gb2Zmc2V0ICsgbWF0Y2gubGVuZ3RoO1xuXG4gICAgICBpZiAoZXNjYXBlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgZXNjYXBlICsgXCIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcXG4nXCI7XG4gICAgICB9IGVsc2UgaWYgKGludGVycG9sYXRlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgaW50ZXJwb2xhdGUgKyBcIikpPT1udWxsPycnOl9fdCkrXFxuJ1wiO1xuICAgICAgfSBlbHNlIGlmIChldmFsdWF0ZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGUgKyBcIlxcbl9fcCs9J1wiO1xuICAgICAgfVxuXG4gICAgICAvLyBBZG9iZSBWTXMgbmVlZCB0aGUgbWF0Y2ggcmV0dXJuZWQgdG8gcHJvZHVjZSB0aGUgY29ycmVjdCBvZmZlc3QuXG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSk7XG4gICAgc291cmNlICs9IFwiJztcXG5cIjtcblxuICAgIC8vIElmIGEgdmFyaWFibGUgaXMgbm90IHNwZWNpZmllZCwgcGxhY2UgZGF0YSB2YWx1ZXMgaW4gbG9jYWwgc2NvcGUuXG4gICAgaWYgKCFzZXR0aW5ncy52YXJpYWJsZSkgc291cmNlID0gJ3dpdGgob2JqfHx7fSl7XFxuJyArIHNvdXJjZSArICd9XFxuJztcblxuICAgIHNvdXJjZSA9IFwidmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLFwiICtcbiAgICAgIFwicHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyk7fTtcXG5cIiArXG4gICAgICBzb3VyY2UgKyAncmV0dXJuIF9fcDtcXG4nO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhciByZW5kZXIgPSBuZXcgRnVuY3Rpb24oc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicsICdfJywgc291cmNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuXG4gICAgdmFyIHRlbXBsYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pO1xuICAgIH07XG5cbiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uXG4gICAgdmFyIGFyZ3VtZW50ID0gc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaic7XG4gICAgdGVtcGxhdGUuc291cmNlID0gJ2Z1bmN0aW9uKCcgKyBhcmd1bWVudCArICcpe1xcbicgKyBzb3VyY2UgKyAnfSc7XG5cbiAgICByZXR1cm4gdGVtcGxhdGU7XG4gIH07XG5cbiAgLy8gQWRkIGEgXCJjaGFpblwiIGZ1bmN0aW9uLiBTdGFydCBjaGFpbmluZyBhIHdyYXBwZWQgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8uY2hhaW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBfKG9iaik7XG4gICAgaW5zdGFuY2UuX2NoYWluID0gdHJ1ZTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG5cbiAgLy8gT09QXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuICAvLyBJZiBVbmRlcnNjb3JlIGlzIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBpdCByZXR1cm5zIGEgd3JhcHBlZCBvYmplY3QgdGhhdFxuICAvLyBjYW4gYmUgdXNlZCBPTy1zdHlsZS4gVGhpcyB3cmFwcGVyIGhvbGRzIGFsdGVyZWQgdmVyc2lvbnMgb2YgYWxsIHRoZVxuICAvLyB1bmRlcnNjb3JlIGZ1bmN0aW9ucy4gV3JhcHBlZCBvYmplY3RzIG1heSBiZSBjaGFpbmVkLlxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb250aW51ZSBjaGFpbmluZyBpbnRlcm1lZGlhdGUgcmVzdWx0cy5cbiAgdmFyIHJlc3VsdCA9IGZ1bmN0aW9uKGluc3RhbmNlLCBvYmopIHtcbiAgICByZXR1cm4gaW5zdGFuY2UuX2NoYWluID8gXyhvYmopLmNoYWluKCkgOiBvYmo7XG4gIH07XG5cbiAgLy8gQWRkIHlvdXIgb3duIGN1c3RvbSBmdW5jdGlvbnMgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm1peGluID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgXy5lYWNoKF8uZnVuY3Rpb25zKG9iaiksIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBmdW5jID0gX1tuYW1lXSA9IG9ialtuYW1lXTtcbiAgICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gW3RoaXMuX3dyYXBwZWRdO1xuICAgICAgICBwdXNoLmFwcGx5KGFyZ3MsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiByZXN1bHQodGhpcywgZnVuYy5hcHBseShfLCBhcmdzKSk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEFkZCBhbGwgb2YgdGhlIFVuZGVyc2NvcmUgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgXy5taXhpbihfKTtcblxuICAvLyBBZGQgYWxsIG11dGF0b3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLlxuICBfLmVhY2goWydwb3AnLCAncHVzaCcsICdyZXZlcnNlJywgJ3NoaWZ0JywgJ3NvcnQnLCAnc3BsaWNlJywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdO1xuICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2JqID0gdGhpcy5fd3JhcHBlZDtcbiAgICAgIG1ldGhvZC5hcHBseShvYmosIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoKG5hbWUgPT09ICdzaGlmdCcgfHwgbmFtZSA9PT0gJ3NwbGljZScpICYmIG9iai5sZW5ndGggPT09IDApIGRlbGV0ZSBvYmpbMF07XG4gICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIG9iaik7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWRkIGFsbCBhY2Nlc3NvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIF8uZWFjaChbJ2NvbmNhdCcsICdqb2luJywgJ3NsaWNlJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBtZXRob2QuYXBwbHkodGhpcy5fd3JhcHBlZCwgYXJndW1lbnRzKSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gRXh0cmFjdHMgdGhlIHJlc3VsdCBmcm9tIGEgd3JhcHBlZCBhbmQgY2hhaW5lZCBvYmplY3QuXG4gIF8ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dyYXBwZWQ7XG4gIH07XG5cbiAgLy8gUHJvdmlkZSB1bndyYXBwaW5nIHByb3h5IGZvciBzb21lIG1ldGhvZHMgdXNlZCBpbiBlbmdpbmUgb3BlcmF0aW9uc1xuICAvLyBzdWNoIGFzIGFyaXRobWV0aWMgYW5kIEpTT04gc3RyaW5naWZpY2F0aW9uLlxuICBfLnByb3RvdHlwZS52YWx1ZU9mID0gXy5wcm90b3R5cGUudG9KU09OID0gXy5wcm90b3R5cGUudmFsdWU7XG5cbiAgXy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJycgKyB0aGlzLl93cmFwcGVkO1xuICB9O1xuXG4gIC8vIEFNRCByZWdpc3RyYXRpb24gaGFwcGVucyBhdCB0aGUgZW5kIGZvciBjb21wYXRpYmlsaXR5IHdpdGggQU1EIGxvYWRlcnNcbiAgLy8gdGhhdCBtYXkgbm90IGVuZm9yY2UgbmV4dC10dXJuIHNlbWFudGljcyBvbiBtb2R1bGVzLiBFdmVuIHRob3VnaCBnZW5lcmFsXG4gIC8vIHByYWN0aWNlIGZvciBBTUQgcmVnaXN0cmF0aW9uIGlzIHRvIGJlIGFub255bW91cywgdW5kZXJzY29yZSByZWdpc3RlcnNcbiAgLy8gYXMgYSBuYW1lZCBtb2R1bGUgYmVjYXVzZSwgbGlrZSBqUXVlcnksIGl0IGlzIGEgYmFzZSBsaWJyYXJ5IHRoYXQgaXNcbiAgLy8gcG9wdWxhciBlbm91Z2ggdG8gYmUgYnVuZGxlZCBpbiBhIHRoaXJkIHBhcnR5IGxpYiwgYnV0IG5vdCBiZSBwYXJ0IG9mXG4gIC8vIGFuIEFNRCBsb2FkIHJlcXVlc3QuIFRob3NlIGNhc2VzIGNvdWxkIGdlbmVyYXRlIGFuIGVycm9yIHdoZW4gYW5cbiAgLy8gYW5vbnltb3VzIGRlZmluZSgpIGlzIGNhbGxlZCBvdXRzaWRlIG9mIGEgbG9hZGVyIHJlcXVlc3QuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoJ3VuZGVyc2NvcmUnLCBbXSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXztcbiAgICB9KTtcbiAgfVxufS5jYWxsKHRoaXMpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUvdW5kZXJzY29yZS5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgKiBhcyBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5leHBvcnQgY2xhc3MgVXRpbHMge1xuICAgIHN0YXRpYyBfc3RyaW5nQ29tcGFyZSA9IGZ1bmN0aW9uKHN0cmluZywgY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZy50b0xvd2VyQ2FzZSgpID09PSBjaGVjaztcbiAgICB9O1xuXG4gICAgc3RhdGljIGlzRWxlbWVudCA9IHtcbiAgICAgICAgX2lzRWxlbWVudDogZnVuY3Rpb24oZWwsIGNoZWNrKSB7XG4gICAgICAgICAgICB2YXIgdGFnID0gZWw7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRhZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0YWcgPSBlbC50YWdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBVdGlscy5fc3RyaW5nQ29tcGFyZSh0YWcsIGNoZWNrKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW1hZ2U6IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICByZXR1cm4gVXRpbHMuaXNFbGVtZW50Ll9pc0VsZW1lbnQoZWwsICdpbWcnKTtcbiAgICAgICAgfSxcbiAgICAgICAgYW5jaG9yOiBmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgcmV0dXJuIFV0aWxzLmlzRWxlbWVudC5faXNFbGVtZW50KGVsLCAnYScpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHN0YXRpYyBnZXRDYWxsYmFja3M8VD4oXG4gICAgICAgIHN1Y2Nlc3M/LFxuICAgICAgICBlcnJvcj9cbiAgICApOiB7IHByb21pc2U6IFByb21pc2U8VD47IHN1Y2Nlc3M6IFQ7IGVycm9yOiBFcnJvciB9IHtcbiAgICAgICAgdmFyIHByb21pc2U7XG4gICAgICAgIHZhciBjcmVhdGVQcm9taXNlID0gZnVuY3Rpb24oKTogUHJvbWlzZTxUPiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8VD4oZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgc3VjY2VzcyA9IChkYXRhOiBUKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBlcnJvciA9IChlcnJvcjogRXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHR5cGVvZiBzdWNjZXNzICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBlcnJvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcHJvbWlzZSA9IGNyZWF0ZVByb21pc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHByb21pc2U6IHByb21pc2UsIHN1Y2Nlc3M6IHN1Y2Nlc3MsIGVycm9yOiBlcnJvciB9O1xuICAgIH1cblxuICAgIHN0YXRpYyBidWlsZFByb21pc2U8VD4ob3BlcmF0aW9uLCBzdWNjZXNzLCBlcnJvcik6IFByb21pc2U8VD4ge1xuICAgICAgICB2YXIgY2FsbGJhY2tzID0gVXRpbHMuZ2V0Q2FsbGJhY2tzPFQ+KHN1Y2Nlc3MsIGVycm9yKTtcbiAgICAgICAgb3BlcmF0aW9uKGNhbGxiYWNrcy5zdWNjZXNzLCBjYWxsYmFja3MuZXJyb3IpO1xuICAgICAgICByZXR1cm4gPFByb21pc2U8VD4+Y2FsbGJhY2tzLnByb21pc2U7XG4gICAgfVxuXG4gICAgc3RhdGljIHByb21pc2VzQWxsU2V0dGxlZCA9IGZ1bmN0aW9uKHByb21pc2VzKSB7XG4gICAgICAgIHJldHVybiBVdGlscy5fbWFwUHJvbWlzZXMocHJvbWlzZXMpO1xuICAgIH07XG4gICAgc3RhdGljIF9tYXBQcm9taXNlcyA9IGZ1bmN0aW9uKHByb21pc2VzLCBzdG9wT25FcnJvciA9IGZhbHNlKSB7XG4gICAgICAgIHZhciBwcm9taXNlQ291bnQgPSBfLnNpemUocHJvbWlzZXMpO1xuICAgICAgICB2YXIgcmVzdWx0T2JqID0gQXJyYXkuaXNBcnJheShwcm9taXNlcykgPyBbXSA6IHt9O1xuICAgICAgICBpZiAocHJvbWlzZUNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdE9iaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIGFib3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBzZXR0bGVkQ291bnQgPSAwO1xuICAgICAgICAgICAgdmFyIHN0b3JlUmVzcG9uc2UgPSBmdW5jdGlvbihyZXNwb25zZSwga2V5LCBpc0Vycm9yID0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoYWJvcnRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciBzZXR0bGVtZW50O1xuICAgICAgICAgICAgICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldHRsZW1lbnQgPSB7IHN0YXRlOiAncmVqZWN0ZWQnLCByZWFzb246IHJlc3BvbnNlIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0dGxlbWVudCA9IHsgc3RhdGU6ICdmdWxmaWxsZWQnLCB2YWx1ZTogcmVzcG9uc2UgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0T2JqW2tleV0gPSBzZXR0bGVtZW50O1xuICAgICAgICAgICAgICAgIHNldHRsZWRDb3VudCsrO1xuICAgICAgICAgICAgICAgIGlmIChzZXR0bGVkQ291bnQgPT09IHByb21pc2VDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdE9iaik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF8uZWFjaChwcm9taXNlcywgZnVuY3Rpb24ocHJvbWlzZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgKHByb21pc2UgYXMgUHJvbWlzZTxhbnk+KS50aGVuKFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlUmVzcG9uc2UocmVzLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXMpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9wT25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVSZXNwb25zZShlcnIsIGtleSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3V0aWxzLnRzIiwiZGVjbGFyZSBjb25zdCBkb2N1bWVudDtcblxuaW1wb3J0ICogYXMgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IHsgRXZlbnRFbWl0dGVyRXh0ZW5kZWQgfSBmcm9tICcuL0V2ZW50RW1pdHRlckV4dGVuZGVkJztcblxuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IEh0bWxIZWxwZXJSZXNwb25zaXZlTW9kdWxlIH0gZnJvbSAnLi9odG1sSGVscGVyUmVzcG9uc2l2ZU1vZHVsZSc7XG5cbmNvbnN0IGRlZmF1bHRzID0ge1xuICAgIHByb2Nlc3NPbkxvYWQ6IGZhbHNlLFxuICAgIHByb2Nlc3NPblJlc2l6ZTogZmFsc2UsXG4gICAgbG9hZGluZ0ltYWdlVXJsOiAnJyxcbiAgICBlcnJvckltYWdlVXJsOiAnJyxcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgIGxvYWRpbmdJbWFnZTogJ2RhdGEtbG9hZGluZy1pbWFnZScsXG4gICAgICAgIGVycm9ySW1hZ2U6ICdkYXRhLWVycm9yLWltYWdlJyxcbiAgICAgICAgZHBpOiAnZGF0YS1kcGknLFxuICAgICAgICBpbWFnZVNvdXJjZTogJ2RhdGEtc3JjJyxcbiAgICAgICAgZmlsZVNvdXJjZTogJ2RhdGEtaHJlZicsXG4gICAgICAgIGVuYWJsZU9mZmxpbmU6ICdkYXRhLW9mZmxpbmUnLFxuICAgICAgICBlbmFibGVSZXNwb25zaXZlOiAnZGF0YS1yZXNwb25zaXZlJ1xuICAgIH0sXG4gICAgcmVzcG9uc2l2ZVBhcmFtczoge1xuICAgICAgICAvL2h0dHA6Ly9kb2NzLnRlbGVyaWsuY29tL3BsYXRmb3JtL2JhY2tlbmQtc2VydmljZXMvamF2YXNjcmlwdC9yZXNwb25zaXZlLWltYWdlcy9yZXNwb25zaXZlLWltYWdlcy1wYXJhbWV0ZXJzXG4gICAgfVxufTtcblxuZXhwb3J0IGludGVyZmFjZSBIdG1sSGVscGVyQ29uZmlnIHtcbiAgICBhcHBJZDogc3RyaW5nO1xuICAgIHNjaGVtZT86IHN0cmluZztcbiAgICBwcm9jZXNzT25Mb2FkPzogYm9vbGVhbjtcbiAgICBwcm9jZXNzT25SZXNpemU/OiBib29sZWFuO1xuICAgIGxvYWRpbmdJbWFnZVVybD86IHN0cmluZztcbiAgICBlcnJvckltYWdlVXJsPzogc3RyaW5nO1xuICAgIGF0dHJpYnV0ZXM/OiB7XG4gICAgICAgIGxvYWRpbmdJbWFnZT86IHN0cmluZztcbiAgICAgICAgZXJyb3JJbWFnZT86IHN0cmluZztcbiAgICAgICAgZHBpPzogc3RyaW5nO1xuICAgICAgICBpbWFnZVNvdXJjZT86IHN0cmluZztcbiAgICAgICAgZW5hYmxlUmVzcG9uc2l2ZT86IHN0cmluZztcbiAgICB9O1xuICAgIHJlc3BvbnNpdmVQYXJhbXM/OiB7fTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIdG1sSGVscGVyUHJvY2Vzc1NldHRpbmdzIHtcbiAgICByZXNwb25zaXZlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEh0bWxIZWxwZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXJFeHRlbmRlZCB7XG4gICAgc2V0dGluZ3MgPSB7XG4gICAgICAgIHVybFRlbXBsYXRlOiAnW3Byb3RvY29sXVtob3N0bmFtZV1bYXBwaWRdL1tvcGVyYXRpb25zXVt1cmxdJyxcbiAgICAgICAgc2VydmVyOiAnbG9jYWxob3N0OjcwNzEvMS8nXG4gICAgfTtcblxuICAgIG9wdGlvbnM6IEh0bWxIZWxwZXJDb25maWc7XG4gICAgcmVzcG9uc2l2ZTogSHRtbEhlbHBlclJlc3BvbnNpdmVNb2R1bGU7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IEh0bWxIZWxwZXJDb25maWcpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBfLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XG4gICAgICAgIHRoaXMub3B0aW9ucy5hdHRyaWJ1dGVzID0gXy5leHRlbmQoXG4gICAgICAgICAgICB7fSxcbiAgICAgICAgICAgIGRlZmF1bHRzLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICBjb25maWcuYXR0cmlidXRlc1xuICAgICAgICApO1xuICAgICAgICB0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZVBhcmFtcyA9IF8uZXh0ZW5kKFxuICAgICAgICAgICAge30sXG4gICAgICAgICAgICBkZWZhdWx0cy5yZXNwb25zaXZlUGFyYW1zLFxuICAgICAgICAgICAgY29uZmlnLnJlc3BvbnNpdmVQYXJhbXNcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnJlc3BvbnNpdmUgPSBuZXcgSHRtbEhlbHBlclJlc3BvbnNpdmVNb2R1bGUodGhpcyk7XG5cbiAgICAgICAgdGhpcy5faW5pdCgpO1xuICAgIH1cblxuICAgIF9pbml0KCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMucHJvY2Vzc09uTG9hZCkge1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLnByb2Nlc3NBbGwuYmluZCh0aGlzKSwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wcm9jZXNzT25SZXNpemUpIHtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICdyZXNpemUnLFxuICAgICAgICAgICAgICAgIF8uZGVib3VuY2UodGhpcy5wcm9jZXNzQWxsLmJpbmQodGhpcyksIDMwMCksXG4gICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfdHJpZ2dlck9uUHJvY2Vzc2VkKGFyZ3MpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdwcm9jZXNzZWQnLCBhcmdzKTtcbiAgICB9XG5cbiAgICBfZGVmYXVsdFByb2Nlc3NTZXR0aW5ncyhzZXR0aW5ncyk6IEh0bWxIZWxwZXJQcm9jZXNzU2V0dGluZ3Mge1xuICAgICAgICByZXR1cm4gXy5kZWZhdWx0cyh7fSwgc2V0dGluZ3MsIHtcbiAgICAgICAgICAgIHJlc3BvbnNpdmU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3NldExvYWRpbmdVcmwoZWxlbWVudCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHZhciBsb2FkaW5nSW1hZ2VVcmkgPVxuICAgICAgICAgICAgZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5vcHRpb25zLmF0dHJpYnV0ZXMubG9hZGluZ0ltYWdlKSB8fFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmxvYWRpbmdJbWFnZVVybDtcbiAgICAgICAgaWYgKCFsb2FkaW5nSW1hZ2VVcmkgfHwgVXRpbHMuaXNFbGVtZW50LmFuY2hvcihlbGVtZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldFVybChlbGVtZW50LCBsb2FkaW5nSW1hZ2VVcmksIHRydWUpO1xuICAgIH1cblxuICAgIF9nZXRCYWNrZ3JvdW5kU3JjKGVsKSB7XG4gICAgICAgIHZhciBlbFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpO1xuICAgICAgICB2YXIgYmFja2dySW1hZ2UgPSBlbFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2JhY2tncm91bmQtaW1hZ2UnKTtcblxuICAgICAgICB2YXIgaW1nOiBhbnkgPSBiYWNrZ3JJbWFnZSAhPT0gJ25vbmUnID8gYmFja2dySW1hZ2UgOiBmYWxzZTtcbiAgICAgICAgaWYgKGltZykge1xuICAgICAgICAgICAgaW1nID0gaW1nLnJlcGxhY2UoL3VybFxcKCgnP1wiPykoLio/KVxcMVxcKS9naSwgJyQyJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW1nO1xuICAgIH1cblxuICAgIF9zZXRFcnJvclVybChlbGVtZW50KSB7XG4gICAgICAgIHZhciBlcnJvckltYWdlVXJsID1cbiAgICAgICAgICAgIGVsZW1lbnQuZ2V0QXR0cmlidXRlKHRoaXMub3B0aW9ucy5hdHRyaWJ1dGVzLmVycm9ySW1hZ2UpIHx8XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZXJyb3JJbWFnZVVybDtcbiAgICAgICAgaWYgKCFlcnJvckltYWdlVXJsIHx8IFV0aWxzLmlzRWxlbWVudC5hbmNob3IoZWxlbWVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9zZXRVcmwoZWxlbWVudCwgZXJyb3JJbWFnZVVybCwgdHJ1ZSkgYXMgUHJvbWlzZTxhbnk+O1xuICAgIH1cblxuICAgIF9zZXRVcmwoZWxlbWVudCwgdXJsLCBhcHBseTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIGVsQXR0ciA9IHNlbGYuX2dldEF0dHIoZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgVXRpbHMuaXNFbGVtZW50LmltYWdlKGVsZW1lbnQpICYmXG4gICAgICAgICAgICAgICAgZWxBdHRyID09PSBzZWxmLm9wdGlvbnMuYXR0cmlidXRlcy5pbWFnZVNvdXJjZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFwcGx5KSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gdXJsO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgQ2FuXFwndCBiZSBsb2FkZWQ6ICR7dXJsfWApKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5fc2V0VXJsKGVsZW1lbnQsIHVybCwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNvbHZlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSB1cmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcHBseSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGVsQXR0cikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsQXR0ciA9PT0gc2VsZi5vcHRpb25zLmF0dHJpYnV0ZXMuaW1hZ2VTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHIgPSAnc3JjJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHIgPSBfLmxhc3QoZWxBdHRyLnNwbGl0KCctJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0ciwgdXJsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICd1cmwoJyArIHVybCArICcpJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhcHBseSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2dldEF0dHIoZWxlbWVudCkge1xuICAgICAgICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUodGhpcy5vcHRpb25zLmF0dHJpYnV0ZXMuaW1hZ2VTb3VyY2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmF0dHJpYnV0ZXMuaW1hZ2VTb3VyY2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfZ2V0VXJsKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHVybCA9XG4gICAgICAgICAgICBlbGVtZW50LmdldEF0dHJpYnV0ZSh0aGlzLm9wdGlvbnMuYXR0cmlidXRlcy5pbWFnZVNvdXJjZSkgfHxcbiAgICAgICAgICAgIHRoaXMuX2dldEJhY2tncm91bmRTcmMoZWxlbWVudCk7XG5cbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG5cbiAgICBfd3JhcEVsZW1lbnRzKGVsZW1lbnRzKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB2YXIgcmVzdWx0cyA9IF8ubWFwKGVsZW1lbnRzLCBmdW5jdGlvbihlbGVtZW50OiBhbnkpIHtcbiAgICAgICAgICAgIHZhciB0YWcgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgdmFyIGV2YWx1YXRlRGF0YUF0dHIgPSBmdW5jdGlvbiBldmFsdWF0ZURhdGFBdHRyKGF0dHIpIHtcbiAgICAgICAgICAgICAgICAvLyBkYXRhLWEgLSB0cnVlXG4gICAgICAgICAgICAgICAgLy8gZGF0YS1hPVwiXCIgLSB0cnVlXG4gICAgICAgICAgICAgICAgLy8gZGF0YS1hPVwidHJ1ZVwiIC0gdHJ1ZVxuICAgICAgICAgICAgICAgIC8vIGRhdGEtYT1cImFueXRoaW5nXCIgLSB0cnVlXG4gICAgICAgICAgICAgICAgLy8gZGF0YS1hPVwiZmFsc2VcIiAtIGZhbHNlXG4gICAgICAgICAgICAgICAgLy8gbWlzc2luZyAtIGZhbHNlXG4gICAgICAgICAgICAgICAgdmFyIHZhbDtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVZhbCA9IChlbGVtZW50LmF0dHJpYnV0ZXNbYXR0cl0gfHwgeyB2YWx1ZTogbnVsbCB9KVxuICAgICAgICAgICAgICAgICAgICAudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFWYWwgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghZGF0YVZhbCkge1xuICAgICAgICAgICAgICAgICAgICB2YWwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gSlNPTi5wYXJzZShkYXRhVmFsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgY2FuUmVzcG9uc2l2ZSA9IGV2YWx1YXRlRGF0YUF0dHIoXG4gICAgICAgICAgICAgICAgc2VsZi5vcHRpb25zLmF0dHJpYnV0ZXMuZW5hYmxlUmVzcG9uc2l2ZVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBlbGVtZW50LFxuICAgICAgICAgICAgICAgIHRhZzogdGFnLFxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTogY2FuUmVzcG9uc2l2ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgcHJvY2Vzc1xuICAgICAqIEBtZW1iZXJPZiBIZWxwZXJzLmh0bWxcbiAgICAgKiBAcGFyYW0ge0h0bWxFbGVtZW50fEh0bWxFbGVtZW50W119IGVsZW1lbnRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzIEEgc2V0dGluZ3Mgc3BlY2lmeWluZyBjdXN0b20gYmVoYXZpb3IuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc2V0dGluZ3MucmVzcG9uc2l2ZV0gV2hldGhlciB0byBwcm9jZXNzIHRoZSBkYXRhLXJlc3BvbnNpdmUgYXR0cmlidXRlcyB0aGF0IGhlbHAgaW1wbGVtZW50IFJlc3BvbnNpdmUgSW1hZ2VzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NldHRpbmdzLm9mZmxpbmVdIFdoZXRoZXIgdG8gcHJvY2VzcyB0aGUgZGF0YS1vZmZsaW5lIGF0dHJpYnV0ZXMgdGhhdCBoZWxwIGltcGxlbWVudCBvZmZsaW5lIGZpbGVzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzdWNjZXNzXSBBIHN1Y2Nlc3MgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2Vycm9yXSBBbiBlcnJvciBjYWxsYmFjay5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgcHJvY2Vzc1xuICAgICAqIEBtZW1iZXJPZiBIZWxwZXJzLmh0bWxcbiAgICAgKiBAcGFyYW0ge0h0bWxFbGVtZW50fEh0bWxFbGVtZW50W119IGVsZW1lbnRzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzIEEgc2V0dGluZ3Mgc3BlY2lmeWluZyBjdXN0b20gYmVoYXZpb3IuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc2V0dGluZ3MucmVzcG9uc2l2ZV0gV2hldGhlciB0byBwcm9jZXNzIHRoZSBkYXRhLXJlc3BvbnNpdmUgYXR0cmlidXRlcyB0aGF0IGhlbHAgaW1wbGVtZW50IFJlc3BvbnNpdmUgSW1hZ2VzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NldHRpbmdzLm9mZmxpbmVdIFdoZXRoZXIgdG8gcHJvY2VzcyB0aGUgZGF0YS1vZmZsaW5lIGF0dHJpYnV0ZXMgdGhhdCBoZWxwIGltcGxlbWVudCBvZmZsaW5lIGZpbGVzLlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBBIHByb21pc2UgdG8gdGhlIHByb2Nlc3Mgc3RhdGUuXG4gICAgICovXG4gICAgcHJvY2VzcyhcbiAgICAgICAgZWxlbWVudHM6IEFycmF5PEhUTUxFbGVtZW50PixcbiAgICAgICAgc2V0dGluZ3M/OiBIdG1sSGVscGVyUHJvY2Vzc1NldHRpbmdzLFxuICAgICAgICBzdWNjZXNzPzogRnVuY3Rpb24sXG4gICAgICAgIGVycm9yPzogRnVuY3Rpb25cbiAgICApOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gVXRpbHMuYnVpbGRQcm9taXNlKFxuICAgICAgICAgICAgcmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MgPSB0aGlzLl9kZWZhdWx0UHJvY2Vzc1NldHRpbmdzKHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIF8uaXNBcnJheShlbGVtZW50cykgfHxcbiAgICAgICAgICAgICAgICAgICAgKGVsZW1lbnRzIGFzIGFueSkgaW5zdGFuY2VvZiBOb2RlTGlzdCB8fFxuICAgICAgICAgICAgICAgICAgICAoZWxlbWVudHMgYXMgQXJyYXk8YW55PikubGVuZ3RoXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gXy5mbGF0dGVuKGVsZW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50cyA9IFs8YW55PmVsZW1lbnRzXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlZEVsZW1lbnRzID0gdGhpcy5fd3JhcEVsZW1lbnRzKGVsZW1lbnRzKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBfLmVhY2god3JhcHBlZEVsZW1lbnRzLCBlbGVtZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQuaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2ZmbGluZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YVVybCA9IHRoaXMuX2dldFVybChyZXN1bHQuZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhVXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZXMucHVzaChQcm9taXNlLnJlc29sdmUocmVzdWx0KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FuUmVzcG9uc2l2ZSA9IHNldHRpbmdzLnJlc3BvbnNpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gZWxlbWVudC5vcGVyYXRpb25zLnJlc3BvbnNpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW5SZXNwb25zaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXRVcmwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLl9zZXRMb2FkaW5nVXJsKHJlc3VsdC5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZU9wZXJhdGlvbiA9IGZ1bmN0aW9uIGhhbmRsZU9wZXJhdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRbb3BlcmF0aW9uXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FuUmVzcG9uc2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2l2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVzcG9uc2l2ZUltYWdlKGVsZW1lbnQsIGRhdGFVcmwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGhhbmRsZU9wZXJhdGlvbi5iaW5kKHRoaXMsICdyZXNwb25zaXZlJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlID0gKDxQcm9taXNlPGFueT4+cHJvbWlzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZpbmFsVXJsID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2V0VXJsKHJlc3VsdC5lbGVtZW50LCBmaW5hbFVybCkudGhlbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4gcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2V0RXJyb3JVcmwoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5lbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogcmVzdWx0LmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHByb21pc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgVXRpbHMucHJvbWlzZXNBbGxTZXR0bGVkKHByb21pc2VzKS50aGVuKHJlc3VsdHMgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvY2Vzc2VkID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWlsZWQgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICBfLmVhY2g8YW55PihyZXN1bHRzLCBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUgPT09ICdmdWxmaWxsZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkLnB1c2gocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkLnB1c2gocmVzdWx0LnJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWQ6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWxlZDogZmFpbGVkXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJpZ2dlck9uUHJvY2Vzc2VkKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzLFxuICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAbWV0aG9kIHByb2Nlc3NBbGxcbiAgICAgKiBAbWVtYmVyT2YgSGVscGVycy5odG1sXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzIEEgc2V0dGluZ3Mgc3BlY2lmeWluZyBjdXN0b20gYmVoYXZpb3IuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc2V0dGluZ3MucmVzcG9uc2l2ZV0gV2hldGhlciB0byBwcm9jZXNzIHRoZSBkYXRhLXJlc3BvbnNpdmUgYXR0cmlidXRlcyB0aGF0IGhlbHAgaW1wbGVtZW50IFJlc3BvbnNpdmUgSW1hZ2VzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NldHRpbmdzLm9mZmxpbmVdIFdoZXRoZXIgdG8gcHJvY2VzcyB0aGUgZGF0YS1vZmZsaW5lIGF0dHJpYnV0ZXMgdGhhdCBoZWxwIGltcGxlbWVudCBvZmZsaW5lIGZpbGVzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzdWNjZXNzXSBBIHN1Y2Nlc3MgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2Vycm9yXSBBbiBlcnJvciBjYWxsYmFjay5cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEBtZXRob2QgcHJvY2Vzc0FsbFxuICAgICAqIEBtZW1iZXJPZiBIZWxwZXJzLmh0bWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc2V0dGluZ3MgQSBzZXR0aW5ncyBzcGVjaWZ5aW5nIGN1c3RvbSBiZWhhdmlvci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzZXR0aW5ncy5yZXNwb25zaXZlXSBXaGV0aGVyIHRvIHByb2Nlc3MgdGhlIGRhdGEtcmVzcG9uc2l2ZSBhdHRyaWJ1dGVzIHRoYXQgaGVscCBpbXBsZW1lbnQgUmVzcG9uc2l2ZSBJbWFnZXMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbc2V0dGluZ3Mub2ZmbGluZV0gV2hldGhlciB0byBwcm9jZXNzIHRoZSBkYXRhLW9mZmxpbmUgYXR0cmlidXRlcyB0aGF0IGhlbHAgaW1wbGVtZW50IG9mZmxpbmUgZmlsZXMuXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IEEgcHJvbWlzZSB0byB0aGUgcHJvY2VzcyBzdGF0ZS5cbiAgICAgKi9cbiAgICBwcm9jZXNzQWxsKHNldHRpbmdzLCBzdWNjZXNzPzogRnVuY3Rpb24sIGVycm9yPzogRnVuY3Rpb24pIHtcbiAgICAgICAgc2V0dGluZ3MgPSB0aGlzLl9kZWZhdWx0UHJvY2Vzc1NldHRpbmdzKHNldHRpbmdzKTtcbiAgICAgICAgdmFyIHJlc3BvbnNpdmVTZWxlY3RvciA9XG4gICAgICAgICAgICAnWycgKyB0aGlzLm9wdGlvbnMuYXR0cmlidXRlcy5lbmFibGVSZXNwb25zaXZlICsgJ10nO1xuXG4gICAgICAgIHZhciByZXNwb25zaXZlRWxlbWVudHMgPSBbXTtcbiAgICAgICAgaWYgKHNldHRpbmdzLnJlc3BvbnNpdmUpIHtcbiAgICAgICAgICAgIHJlc3BvbnNpdmVFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocmVzcG9uc2l2ZVNlbGVjdG9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzbGljZSA9IFtdLnNsaWNlO1xuICAgICAgICB2YXIgZWxlbWVudHMgPSBfLnVuaXF1ZShzbGljZS5jYWxsKHJlc3BvbnNpdmVFbGVtZW50cykuY29uY2F0KFtdKSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucHJvY2VzcyhcbiAgICAgICAgICAgIGVsZW1lbnRzIGFzIEFycmF5PEhUTUxFbGVtZW50PixcbiAgICAgICAgICAgIHNldHRpbmdzLFxuICAgICAgICAgICAgc3VjY2VzcyxcbiAgICAgICAgICAgIGVycm9yXG4gICAgICAgICk7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEh0bWxIZWxwZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9odG1sSGVscGVyLnRzIiwiaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcbmltcG9ydCB7IGxhc3QsIHdpdGhvdXQgfSBmcm9tICd1bmRlcnNjb3JlJztcblxuY2xhc3MgRXZlbnRBcmdzIHtcbiAgICBjYW5jZWxlZCA9IGZhbHNlO1xuXG4gICAgY2FuY2VsKCkge1xuICAgICAgICB0aGlzLmNhbmNlbGVkID0gdHJ1ZTtcbiAgICB9XG59XG5cbi8qXG5BZGRzIGV4dGVuZGVkIGZ1bmN0aW9uYWxpdHkgdG8gdGhlIGV2ZW50IGVtaXR0ZXI6XG4gICAgKiBDYW5jZWxhYmxlIGV2ZW50IGFyZ3VtZW50cyAtIHRoZSBldmVudCBhcmd1bWVudHMgYXJlIGFsd2F5cyBwYXNzZWQgYXMgbGFzdCBhcmd1bWVudCxcbiAgICAgIGNhbGxpbmcgY2FuY2VsIHdpbGwgc3RvcCBvdGhlciBldmVudCBsaXN0ZW5lcnMgaW4gdGhlIGNoYWluIGZyb20gYmVpbmcgaW52b2tlZFxuICAgICogcHJlcGVuZE9uY2VMaXN0ZW5lciAtIFByZXBlbmQgYSBsaXN0ZW5lciB0byB0aGUgc3RhcnQgb2YgdGhlIGNoYWluIC0gdXNlZnVsIGlmIHlvdSB3YW50XG4gICAgICBpdCB0byBiZSBhYmxlIHRvIGNhbmNlbCB0aGUgZXZlbnRcbiAqL1xuZXhwb3J0IGNsYXNzIEV2ZW50RW1pdHRlckV4dGVuZGVkIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgICBfZXZlbnRzOiBhbnlbXTtcblxuICAgIGVtaXQoZXZlbnROYW1lOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogYm9vbGVhbiB7XG4gICAgICAgIGFyZ3MucHVzaChuZXcgRXZlbnRBcmdzKCkpO1xuXG4gICAgICAgIHJldHVybiBzdXBlci5lbWl0KGV2ZW50TmFtZSwgLi4uYXJncyk7XG4gICAgfVxuXG4gICAgYWRkTGlzdGVuZXIoZXZlbnROYW1lOiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHRoaXMge1xuICAgICAgICBjb25zdCB3cmFwcGVkTGlzdGVuZXIgPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXYgPSBsYXN0KGFyZ3MpO1xuICAgICAgICAgICAgaWYgKGV2LmNhbmNlbGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc3VwZXIuYWRkTGlzdGVuZXIoZXZlbnROYW1lLCB3cmFwcGVkTGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBwcmVwZW5kT25jZUxpc3RlbmVyKGV2ZW50TmFtZTogc3RyaW5nLCBsaXN0ZW5lcjogRnVuY3Rpb24pOiB0aGlzIHtcbiAgICAgICAgdGhpcy5vbmNlKGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0aGlzLl9ldmVudHNbZXZlbnROYW1lXSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGFzdExpc3RlbmVyID0gbGFzdCh0aGlzLl9ldmVudHNbZXZlbnROYW1lXSk7XG4gICAgICAgIGNvbnN0IGFsbExpc3RlbmVycyA9IHdpdGhvdXQodGhpcy5fZXZlbnRzW2V2ZW50TmFtZV0sIGxhc3RMaXN0ZW5lcik7XG4gICAgICAgIHRoaXMuX2V2ZW50c1tldmVudE5hbWVdID0gW2xhc3RMaXN0ZW5lcl0uY29uY2F0KGFsbExpc3RlbmVycyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIG9uY2UoZXZlbnROYW1lOiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHRoaXMge1xuICAgICAgICBzdXBlci5vbmNlKGV2ZW50TmFtZSwgbGlzdGVuZXIgYXMgYW55KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgb24oZXZlbnROYW1lOiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHRoaXMge1xuICAgICAgICB0aGlzLmFkZExpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBvZmYoZXZlbnROYW1lOiBzdHJpbmcsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHRoaXMge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgbGlzdGVuZXIgYXMgYW55KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vRXZlbnRFbWl0dGVyRXh0ZW5kZWQudHMiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54XG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cbi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxuLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cbkV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHtcbiAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmICh0eXBlID09PSAnZXJyb3InKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHxcbiAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7XG4gICAgICBlciA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LiAoJyArIGVyICsgJyknKTtcbiAgICAgICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgLy8gZmFzdCBjYXNlc1xuICAgICAgY2FzZSAxOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gc2xvd2VyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHtcbiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7XG4gICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspXG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICBpZiAodGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyKVxuICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/XG4gICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2VcbiAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07XG5cbiAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHtcbiAgICAgIG0gPSB0aGlzLl9tYXhMaXN0ZW5lcnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgICB9XG5cbiAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkge1xuICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCA9IHRydWU7XG4gICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICdVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC4nLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIGluIElFIDEwXG4gICAgICAgIGNvbnNvbGUudHJhY2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgdmFyIGZpcmVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZygpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpO1xuXG4gICAgaWYgKCFmaXJlZCkge1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHRoaXMub24odHlwZSwgZyk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIGxpc3QgPSB0aGlzLl9ldmVudHNbdHlwZV07XG4gIGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICBwb3NpdGlvbiA9IC0xO1xuXG4gIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fFxuICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcblxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7XG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykge1xuICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8XG4gICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvc2l0aW9uIDwgMClcbiAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICBsaXN0Lmxlbmd0aCA9IDA7XG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIga2V5LCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdFxuICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xuICAgIH1cbiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICB9IGVsc2UgaWYgKGxpc3RlbmVycykge1xuICAgIC8vIExJRk8gb3JkZXJcbiAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aClcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2xpc3RlbmVycy5sZW5ndGggLSAxXSk7XG4gIH1cbiAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgcmV0O1xuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldCA9IFtdO1xuICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgcmV0ID0gW3RoaXMuX2V2ZW50c1t0eXBlXV07XG4gIGVsc2VcbiAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTtcbiAgcmV0dXJuIHJldDtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgaWYgKHRoaXMuX2V2ZW50cykge1xuICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpXG4gICAgICByZXR1cm4gMTtcbiAgICBlbHNlIGlmIChldmxpc3RlbmVyKVxuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG59O1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImRlY2xhcmUgY29uc3QgdW5lc2NhcGU7XG5cbmltcG9ydCAqIGFzIF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCB7IEh0bWxIZWxwZXIgfSBmcm9tICcuL2h0bWxIZWxwZXInO1xuaW1wb3J0IHsgVXRpbHMgfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgREVGQVVMVF9SRVNQT05TSVZFX09QRVJBVElPTlMgPSB7XG4gICAgcGFyYW1zOiB7XG4gICAgICAgIHJlc2l6ZToge31cbiAgICB9LFxuICAgIGlzVXNlclJlc2l6ZTogZmFsc2Vcbn07XG5cbmV4cG9ydCBjbGFzcyBIdG1sSGVscGVyUmVzcG9uc2l2ZU1vZHVsZSB7XG4gICAgaHRtbEhlbHBlcjogSHRtbEhlbHBlcjtcblxuICAgIGNvbnN0cnVjdG9yKGh0bWxIZWxwZXI6IEh0bWxIZWxwZXIpIHtcbiAgICAgICAgdGhpcy5odG1sSGVscGVyID0gaHRtbEhlbHBlcjtcbiAgICB9XG5cbiAgICBnZXRCYWNrZ3JvdW5kV2lkdGgoZWwpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbChlbC5vZmZzZXRXaWR0aCk7XG4gICAgfVxuXG4gICAgZ2V0QmFja2dyb3VuZEhlaWdodChlbCkge1xuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGVsLm9mZnNldEhlaWdodCk7XG4gICAgfVxuXG4gICAgcGFyc2VQYXJhbXNTdHJpbmcoc3RyKSB7XG4gICAgICAgIGlmICghc3RyIHx8IHR5cGVvZiBzdHIgPT09ICd1bmRlZmluZWQnIHx8IHN0ci5sZW5ndGggPD0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIERFRkFVTFRfUkVTUE9OU0lWRV9PUEVSQVRJT05TO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhcmFtcyA9IHN0ci5zcGxpdCgnLycpO1xuXG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIGlzVXNlclJlc2l6ZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vVE9ETzogUGVyaGFwcyB0aGUgY29udmVyc2lvbiBmcm9tIHF1ZXJ5IHN0cmluZyB0byBvYmplY3QgYW5kIHZpY2UgdmVyc2EgY291bGQgZ28gaW4gdXRpbHMsIHNpbmNlIGl0IG1heSBiZSB1c2VmdWwgaW4gb3RoZXIgcGxhY2VzP1xuICAgICAgICBfLmNoYWluKHBhcmFtcylcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24ocGFyYW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFwYXJhbTtcbiAgICAgICAgICAgIH0pIC8vVE9ETzogSSB0aGluayB0aGVyZSdzIGEgZnVuY3Rpb24gaW4gbG9kYXNoIGNhbGxlZCBcImNvbXBhY3RcIiwgd2hpY2ggZG9lcyB0aGlzLlxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24ocGFyYW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1QYWlyID0gcGFyYW0uc3BsaXQoJz0nKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1OYW1lID0gcGFyYW1QYWlyWzBdO1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbVZhbHVlcyA9IHBhcmFtUGFpclsxXTtcbiAgICAgICAgICAgICAgICBwYXJhbVZhbHVlcyA9IHVuZXNjYXBlKHBhcmFtVmFsdWVzLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbiAgICAgICAgICAgICAgICByZXN1bHRbcGFyYW1OYW1lXSA9IHBhcmFtVmFsdWVzO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtTmFtZSA9PT0gJ3Jlc2l6ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNVc2VyUmVzaXplID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGFyYW1zOiByZXN1bHQsXG4gICAgICAgICAgICBpc1VzZXJSZXNpemU6IGlzVXNlclJlc2l6ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldEltZ1BhcmFtcyhzcmMsIGVsKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB2YXIgb3BlcmF0aW9ucztcbiAgICAgICAgdmFyIGltZ1VybCA9IHNyYy5yZXBsYWNlKC8uKj9yZXNpemU9W14vL10qXFwvL2dpLCAnJyk7XG4gICAgICAgIHZhciBwcm90b2NvbFJlID0gbmV3IFJlZ0V4cCgnaHR0cHM/Oi8vJywgJ2dpJyk7XG4gICAgICAgIHZhciBzZXJ2ZXJSZSA9IG5ldyBSZWdFeHAodGhpcy5odG1sSGVscGVyLnNldHRpbmdzLnNlcnZlciwgJ2dpJyk7XG4gICAgICAgIHZhciBhcGlJZFJlID0gbmV3IFJlZ0V4cCh0aGlzLmh0bWxIZWxwZXIub3B0aW9ucy5hcHBJZCArICcvJywgJ2dpJyk7XG5cbiAgICAgICAgdmFyIG9wZXJhdGlvbnNSYXcgPSBzcmNcbiAgICAgICAgICAgIC5yZXBsYWNlKGltZ1VybCwgJycpXG4gICAgICAgICAgICAucmVwbGFjZShwcm90b2NvbFJlLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlcnZlclJlLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKGFwaUlkUmUsICcnKVxuICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChvcGVyYXRpb25zUmF3ICE9PSAnJykge1xuICAgICAgICAgICAgdmFyIG9wZXJhdGlvbnNUb1BhcnNlID0gb3BlcmF0aW9uc1Jhdy5pbmRleE9mKCcvJylcbiAgICAgICAgICAgICAgICA/IG9wZXJhdGlvbnNSYXcuc3Vic3RyaW5nKDAsIG9wZXJhdGlvbnNSYXcubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgICAgICA6IG9wZXJhdGlvbnNSYXc7XG4gICAgICAgICAgICAvL1RPRE86IEknbSBoYXp5IG9uIHRoZSBjb250ZXh0LCBidXQuLi4gSWYgb3BlcmF0aW9uc1RvUGFyc2Ugc3RhcnRzIHdpdGggXCIvXCIsIHdlIHBhcnNlIGl0IFwiYXMgaXNcIixcbiAgICAgICAgICAgIC8vaWYgbm90LCBJIGd1ZXNzIGl0J3MgZXhwZWN0ZWQgdG8gaGF2ZSBpdCBpbiB0aGUgZW5kIGFuZCBpdCdzIHRydW5jYXRlZD8gSXMgaXRcbiAgICAgICAgICAgIC8vaW1wb3NzaWJsZSB0byBub3QgaGF2ZSBhIFwiL1wiIGF0IGFsbCBhbmQgY3V0IHRoZSBsYXN0IHN5bWJvbCB3aGVuIG1heWJlIGl0IHNob3VsZG4ndCBiZSBjdXQ/XG4gICAgICAgICAgICBvcGVyYXRpb25zID0gdGhpcy5wYXJzZVBhcmFtc1N0cmluZyhvcGVyYXRpb25zVG9QYXJzZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZWwuZGF0YXNldC5yZXNwb25zaXZlUGFyYW1zKSB7XG4gICAgICAgICAgICBvcGVyYXRpb25zID0gREVGQVVMVF9SRVNQT05TSVZFX09QRVJBVElPTlM7XG4gICAgICAgICAgICBfLmVhY2goZWwuZGF0YXNldC5yZXNwb25zaXZlUGFyYW1zLnNwbGl0KCcsJyksIGZ1bmN0aW9uKFxuICAgICAgICAgICAgICAgIGtleTogc3RyaW5nXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFpciA9IGtleS5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IHBhaXJbMF07XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFpclsxXTtcbiAgICAgICAgICAgICAgICBvcGVyYXRpb25zLnBhcmFtcy5yZXNpemVbcGFyYW1dID0gdmFsdWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wZXJhdGlvbnMgPSBERUZBVUxUX1JFU1BPTlNJVkVfT1BFUkFUSU9OUztcbiAgICAgICAgfVxuXG4gICAgICAgIF8uY2hhaW4odGhpcy5odG1sSGVscGVyLm9wdGlvbnMucmVzcG9uc2l2ZVBhcmFtcylcbiAgICAgICAgICAgIC5rZXlzKClcbiAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHNlbGYuaHRtbEhlbHBlci5vcHRpb25zLnJlc3BvbnNpdmVQYXJhbXNba2V5XTtcbiAgICAgICAgICAgICAgICBvcGVyYXRpb25zLnBhcmFtcy5yZXNpemVba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSWYgaXQncyBhIHVzZXIgcmVzaXplIG9wZXJhdGlvbiwgdXNlIHRoZSBwYXNzZWQgdXJsIGluIHRoZSBkYXRhLXNyYyBwcm9wZXJ0eVxuICAgICAgICBpZiAob3BlcmF0aW9ucy5pc1VzZXJSZXNpemUpIHtcbiAgICAgICAgICAgIGltZ1VybCA9IHNyYztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbWdVcmw6IGltZ1VybCxcbiAgICAgICAgICAgIG9wZXJhdGlvbnM6IG9wZXJhdGlvbnMucGFyYW1zLFxuICAgICAgICAgICAgaXNVc2VyUmVzaXplOiBvcGVyYXRpb25zLmlzVXNlclJlc2l6ZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGhhc0NsYXNzKGVsLCBjbCkge1xuICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCcoPzpcXFxcc3xeKScgKyBjbCArICcoPzpcXFxcc3wkKScpO1xuICAgICAgICByZXR1cm4gISFlbC5jbGFzc05hbWUubWF0Y2gocmVnZXgpO1xuICAgIH1cblxuICAgIGdldEltYWdlV2lkdGgoZWwpIHtcbiAgICAgICAgdmFyIHBhcmVudEVsID0gZWwucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKHBhcmVudEVsKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50V2lkdGggPSBwYXJlbnRFbC5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHZhciBpdGVtU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnRFbCwgbnVsbCk7XG4gICAgICAgICAgICB2YXIgcGwgPSBwYXJzZUZsb2F0KGl0ZW1TdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWxlZnQnKSk7XG4gICAgICAgICAgICB2YXIgcHIgPSBwYXJzZUZsb2F0KGl0ZW1TdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXJpZ2h0JykpO1xuICAgICAgICAgICAgdmFyIGJsID0gcGFyc2VGbG9hdChcbiAgICAgICAgICAgICAgICBpdGVtU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnYm9yZGVyLWxlZnQtd2lkdGgnKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHZhciBiciA9IHBhcnNlRmxvYXQoXG4gICAgICAgICAgICAgICAgaXRlbVN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2JvcmRlci1yaWdodC13aWR0aCcpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMocGFyZW50V2lkdGggLSBNYXRoLmNlaWwocGwgKyBwciArIGJsICsgYnIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGdldEltYWdlSGVpZ2h0KGVsKSB7XG4gICAgICAgIHZhciBwYXJlbnRFbCA9IGVsLnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnRFbCkge1xuICAgICAgICAgICAgdmFyIHBhcmVudEhlaWdodCA9IHBhcmVudEVsLm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgIHZhciBpdGVtU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnRFbCwgbnVsbCk7XG4gICAgICAgICAgICB2YXIgcHQgPSBwYXJzZUZsb2F0KGl0ZW1TdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXRvcCcpKTtcbiAgICAgICAgICAgIHZhciBwYiA9IHBhcnNlRmxvYXQoaXRlbVN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctYm90dG9tJykpO1xuICAgICAgICAgICAgdmFyIGJ0ID0gcGFyc2VGbG9hdChpdGVtU3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnYm9yZGVyLXRvcC13aWR0aCcpKTtcbiAgICAgICAgICAgIHZhciBiYiA9IHBhcnNlRmxvYXQoXG4gICAgICAgICAgICAgICAgaXRlbVN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2JvcmRlci1ib3R0b20td2lkdGgnKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIE1hdGguYWJzKHBhcmVudEhlaWdodCAtIE1hdGguY2VpbChwdCArIHBiICsgYnQgKyBiYikpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgZ2V0RGV2aWNlUGl4ZWxSYXRpbygpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID8gd2luZG93LmRldmljZVBpeGVsUmF0aW8gOiAxO1xuICAgIH1cblxuICAgIGdldFBpeGVsUmF0aW8oZWwpIHtcbiAgICAgICAgdmFyIHBpeGVsRGVuc2l0eTogc3RyaW5nID1cbiAgICAgICAgICAgIGVsLmdldEF0dHJpYnV0ZSh0aGlzLmh0bWxIZWxwZXIub3B0aW9ucy5hdHRyaWJ1dGVzLmRwaSkgfHwgJyc7XG4gICAgICAgIHJldHVybiBwaXhlbERlbnNpdHkgIT09ICcnXG4gICAgICAgICAgICA/IF8uaXNOdW1iZXIocGl4ZWxEZW5zaXR5KSA/IHBhcnNlRmxvYXQocGl4ZWxEZW5zaXR5KSA6IGZhbHNlXG4gICAgICAgICAgICA6IHRoaXMuZ2V0RGV2aWNlUGl4ZWxSYXRpbygpO1xuICAgIH1cblxuICAgIGdldEltZ1BhcmFtc1N0cmluZyhwYXJhbXMpIHtcbiAgICAgICAgdmFyIHBhcmFtc1N0ciA9ICdyZXNpemU9JztcblxuICAgICAgICBfLmNoYWluKHBhcmFtcy5yZXNpemUpXG4gICAgICAgICAgICAua2V5cygpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbihwYXJhbU5hbWUsIGluZGV4LCBhcnIpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXNTdHIgKz0gcGFyYW1OYW1lICsgJzonICsgcGFyYW1zLnJlc2l6ZVtwYXJhbU5hbWVdO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA8IGFyci5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtc1N0ciArPSAnLCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zU3RyICs9ICcvJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcGFyYW1zU3RyO1xuICAgIH1cblxuICAgIHJlc3BvbnNpdmVJbWFnZShpdGVtLCBkYXRhU3JjKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGltYWdlID0gXy5leHRlbmQoe30sIGl0ZW0pO1xuICAgICAgICB2YXIgZWxlbWVudCA9IGltYWdlLml0ZW07XG4gICAgICAgIHZhciB0YWcgPSBpbWFnZS50YWc7XG5cbiAgICAgICAgdmFyIGlzSW1hZ2UgPSBVdGlscy5pc0VsZW1lbnQuaW1hZ2UodGFnKTtcbiAgICAgICAgdmFyIGltZ1dpZHRoO1xuXG4gICAgICAgIGltYWdlID0gXy5leHRlbmQoe30sIGltYWdlLCBzZWxmLmdldEltZ1BhcmFtcyhkYXRhU3JjLCBpdGVtLml0ZW0pKTtcblxuICAgICAgICBpZiAoIWltYWdlLmlzVXNlclJlc2l6ZSkge1xuICAgICAgICAgICAgaW1nV2lkdGggPSBpc0ltYWdlXG4gICAgICAgICAgICAgICAgPyBzZWxmLmdldEltYWdlV2lkdGgoZWxlbWVudClcbiAgICAgICAgICAgICAgICA6IHNlbGYuZ2V0QmFja2dyb3VuZFdpZHRoKGVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW1nV2lkdGggPSBpbWdXaWR0aCA/IGltZ1dpZHRoIDogZmFsc2U7XG4gICAgICAgIHZhciBzcmMgPSBpbWFnZS5pc1VzZXJSZXNpemVcbiAgICAgICAgICAgID8gaW1hZ2UuaW1nVXJsXG4gICAgICAgICAgICA6IHNlbGYuZ2V0SW1nU3JjKGltYWdlLCBpbWdXaWR0aCk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgICAgICAgIGlmICghaW1nV2lkdGggJiYgIWltYWdlLmlzVXNlclJlc2l6ZSkge1xuICAgICAgICAgICAgICAgIC8vIHdlIGRvbid0IGhhdmUgdGhlIHdpZHRoIG9mIHRoZSB1c2VyIGltYWdlIGVpdGhlci5cbiAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGVsZW1lbnQgaXMgbm90IHZpc2libGUsIHdlIGRvbid0IGhhdmUgdG8gcHJvY2VzcyBpdC5cblxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHNyYyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldEltZ1NyYyhpbWFnZSwgaW1nV2lkdGgpIHtcbiAgICAgICAgdmFyIHByb3RvY29sID0gdGhpcy5odG1sSGVscGVyLm9wdGlvbnMuc2NoZW1lICsgJzovLyc7XG4gICAgICAgIHZhciBhcHBJZCA9IHRoaXMuaHRtbEhlbHBlci5vcHRpb25zLmFwcElkO1xuICAgICAgICB2YXIgc2VydmVyID0gdGhpcy5odG1sSGVscGVyLnNldHRpbmdzLnNlcnZlcjtcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuaHRtbEhlbHBlci5zZXR0aW5ncy51cmxUZW1wbGF0ZSBhcyBzdHJpbmc7XG4gICAgICAgIHZhciBwaXhlbERlbnNpdHkgPSB0aGlzLmdldFBpeGVsUmF0aW8oaW1hZ2UuaXRlbSk7XG5cbiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoJ1twcm90b2NvbF0nLCBwcm90b2NvbCk7XG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdbYXBwaWRdJywgYXBwSWQgfHwgJycpO1xuICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgnW2hvc3RuYW1lXScsIHNlcnZlcik7XG5cbiAgICAgICAgdmFyIHBhcmFtcyA9IGltYWdlLm9wZXJhdGlvbnMgfHwgZmFsc2U7XG4gICAgICAgIHZhciBwYXJhbXNTdHJpbmc7XG4gICAgICAgIGlmIChwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciBvcGVyYXRpb25zID0gJyc7XG4gICAgICAgICAgICBwYXJhbXMucmVzaXplID0gcGFyYW1zLnJlc2l6ZSB8fCB7fTtcbiAgICAgICAgICAgIHBhcmFtcy5yZXNpemUudyA9IGltZ1dpZHRoO1xuICAgICAgICAgICAgcGFyYW1zLnJlc2l6ZS5wZCA9IHBpeGVsRGVuc2l0eTtcbiAgICAgICAgICAgIHZhciBmaWxsID0gcGFyYW1zLnJlc2l6ZS5maWxsO1xuICAgICAgICAgICAgaWYgKGZpbGwgPT09ICdjb3ZlcicgfHwgZmlsbCA9PT0gJ2NvbnRhaW4nKSB7XG4gICAgICAgICAgICAgICAgLy9mb3IgZmlsbDpjb3Zlciwgd2UgbmVlZCBib3RoIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRoZSBpbWFnZVxuICAgICAgICAgICAgICAgIHBhcmFtcy5yZXNpemUuaCA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW1hZ2VIZWlnaHQoaW1hZ2UuaXRlbSkgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRCYWNrZ3JvdW5kSGVpZ2h0KGltYWdlLml0ZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXJhbXNTdHJpbmcgPSB0aGlzLmdldEltZ1BhcmFtc1N0cmluZyhwYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgcmVzaXplOiB7XG4gICAgICAgICAgICAgICAgICAgIHc6IGltZ1dpZHRoLFxuICAgICAgICAgICAgICAgICAgICBwZDogcGl4ZWxEZW5zaXR5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHBhcmFtc1N0cmluZyA9IHRoaXMuZ2V0SW1nUGFyYW1zU3RyaW5nKGRlZmF1bHRQYXJhbXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoJ1tvcGVyYXRpb25zXScsIHBhcmFtc1N0cmluZyk7XG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCdbdXJsXScsIGltYWdlLmltZ1VybCk7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaHRtbEhlbHBlclJlc3BvbnNpdmVNb2R1bGUudHMiXSwic291cmNlUm9vdCI6IiJ9